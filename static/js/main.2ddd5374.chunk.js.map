{"version":3,"sources":["utils/calculateChance.worker.ts","data/enums.ts","data/combinations.ts","components/Select.tsx","utils/formatNumber.ts","components/ArtifactForm.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["addMethods","methods","module","exports","w","Worker","name","Types","Stats","allSubStats","CR","CD","ATK","ATKFlat","HP","HPFlat","DEF","DEFFlat","ER","EM","allMainStats","HB","Pyro","Electro","Cryo","Hydro","Anemo","Geo","Physical","allowedMainStats","Flower","Plume","Sands","Goblet","Circlet","allowedSubStats","reduce","acc","mainStat","_","without","Option","styled","option","Select","onChange","value","items","rest","onChangeSelect","useCallback","event","target","map","item","label","getMeaningfulPercents","isNil","n","Math","pow","toFixed","workerInstance","WorkerCalculateChance","typeOptions","values","type","TooltipContainer","div","QuestionIconContainer","ResultsBox","memo","chance","chartData","margin","maxW","width","borderWidth","borderRadius","padding","paddingLeft","alignItems","flexFlow","paddingRight","fontSize","fontWeight","color","marginRight","isExternal","href","marginTop","isEmpty","ResponsiveContainer","aspect","AreaChart","data","top","right","bottom","left","id","x1","y1","x2","y2","offset","stopColor","stopOpacity","Area","fillOpacity","fill","dataKey","stroke","CartesianGrid","strokeDasharray","XAxis","YAxis","domain","tickFormatter","Tooltip","isAnimationActive","content","payload","resin","ArtifactForm","useState","acceptBothSets","subStats","formData","setFormData","setChance","calculating","setCalculating","setChartData","mainStatOptions","subStatOptions","filter","subStat","find","useEffect","form","onChangeSubStat","pair","onChangeSubStatNumber","stringValue","console","log","onCalculate","a","calculateChance","invertedChance","cumulativeChartData","resinSpent","cumulativeInvertedChance","i","push","spacing","display","cursor","htmlFor","size","mb","checked","isChecked","index","min","defaultValue","colorScheme","onClick","onRemoveSubStat","keys","length","icon","disabled","isLoading","MainContainer","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2ddd5374.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"calculateChance\",\"Worker\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"967ea5c3a09c68450e27.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","export enum Types {\r\n  Flower = \"Flower of Life\",\r\n  Plume = \"Plume of Death\",\r\n  Sands = \"Sands of Eon\",\r\n  Goblet = \"Goblet of Eonothem\",\r\n  Circlet = \"Circlet of Logos\",\r\n}\r\n\r\nexport enum Stats {\r\n  HPFlat = \"HP\",\r\n  HP = \"HP%\",\r\n  ATKFlat = \"ATK\",\r\n  ATK = \"ATK%\",\r\n  DEFFlat = \"DEF\", // not main\r\n  DEF = \"DEF%\",\r\n  CR = \"CRIT Rate%\",\r\n  CD = \"CRIT DMG%\",\r\n  ER = \"Energy Recharge%\",\r\n  EM = \"Elemental Mastery\",\r\n  // not sub\r\n  HB = \"Healing Bonus%\",\r\n  Pyro = \"Pyro DMG Bonus%\",\r\n  Electro = \"Electro DMG Bonus%\",\r\n  Cryo = \"Cryo DMG Bonus%\",\r\n  Hydro = \"Hydro DMG Bonus%\",\r\n  Anemo = \"Anemo DMG Bonus%\",\r\n  Geo = \"Geo DMG Bonus%\",\r\n  Physical = \"Physical DMG Bonus%\",\r\n}\r\n\r\nexport type SubStats =\r\n  | Stats.HPFlat\r\n  | Stats.HP\r\n  | Stats.ATKFlat\r\n  | Stats.ATK\r\n  | Stats.DEFFlat\r\n  | Stats.DEF\r\n  | Stats.CR\r\n  | Stats.CD\r\n  | Stats.ER\r\n  | Stats.EM;\r\n\r\nexport type MainStats =\r\n  | Stats.HPFlat\r\n  | Stats.HP\r\n  | Stats.ATKFlat\r\n  | Stats.ATK\r\n  | Stats.DEF\r\n  | Stats.CR\r\n  | Stats.CD\r\n  | Stats.ER\r\n  | Stats.EM\r\n  | Stats.HB\r\n  | Stats.Pyro\r\n  | Stats.Electro\r\n  | Stats.Cryo\r\n  | Stats.Hydro\r\n  | Stats.Anemo\r\n  | Stats.Geo\r\n  | Stats.Physical;\r\n","import _ from \"lodash/fp\";\r\nimport { MainStats, Stats, SubStats, Types } from \"./enums\";\r\n\r\nconst allSubStats: SubStats[] = [\r\n  Stats.CR,\r\n  Stats.CD,\r\n  Stats.ATK,\r\n  Stats.ATKFlat,\r\n  Stats.HP,\r\n  Stats.HPFlat,\r\n  Stats.DEF,\r\n  Stats.DEFFlat,\r\n  Stats.ER,\r\n  Stats.EM,\r\n];\r\n\r\nconst allMainStats: MainStats[] = [\r\n  Stats.HPFlat,\r\n  Stats.ATKFlat,\r\n  Stats.HP,\r\n  Stats.ATK,\r\n  Stats.DEF,\r\n  Stats.ER,\r\n  Stats.EM,\r\n  Stats.CR,\r\n  Stats.CD,\r\n  Stats.HB,\r\n  Stats.Pyro,\r\n  Stats.Electro,\r\n  Stats.Cryo,\r\n  Stats.Hydro,\r\n  Stats.Anemo,\r\n  Stats.Geo,\r\n  Stats.Physical,\r\n];\r\n\r\nexport type MainStatsByType<Type extends Types> = Type extends Types.Flower\r\n  ? Stats.HPFlat\r\n  : Type extends Types.Plume\r\n  ? Stats.ATKFlat\r\n  : Type extends Types.Sands\r\n  ? Stats.HP | Stats.ATK | Stats.DEF | Stats.ER | Stats.EM\r\n  : Type extends Types.Goblet\r\n  ?\r\n      | Stats.HP\r\n      | Stats.ATK\r\n      | Stats.DEF\r\n      | Stats.Pyro\r\n      | Stats.Electro\r\n      | Stats.Cryo\r\n      | Stats.Hydro\r\n      | Stats.Anemo\r\n      | Stats.Geo\r\n      | Stats.Physical\r\n      | Stats.EM\r\n  : Type extends Types.Circlet\r\n  ? Stats.HP | Stats.ATK | Stats.DEF | Stats.CR | Stats.CD | Stats.HB | Stats.EM\r\n  : never;\r\n\r\nexport type SubStatsByMain<MainStat extends MainStats> = Exclude<\r\n  SubStats,\r\n  MainStat\r\n>;\r\n\r\nexport const allowedMainStats: { [T in Types]: MainStatsByType<T>[] } = {\r\n  [Types.Flower]: [Stats.HPFlat],\r\n  [Types.Plume]: [Stats.ATKFlat],\r\n  [Types.Sands]: [Stats.HP, Stats.ATK, Stats.DEF, Stats.ER, Stats.EM],\r\n  [Types.Goblet]: [\r\n    Stats.HP,\r\n    Stats.ATK,\r\n    Stats.DEF,\r\n    Stats.Pyro,\r\n    Stats.Electro,\r\n    Stats.Cryo,\r\n    Stats.Hydro,\r\n    Stats.Anemo,\r\n    Stats.Geo,\r\n    Stats.Physical,\r\n    Stats.EM,\r\n  ],\r\n  [Types.Circlet]: [\r\n    Stats.HP,\r\n    Stats.ATK,\r\n    Stats.DEF,\r\n    Stats.CR,\r\n    Stats.CD,\r\n    Stats.HB,\r\n    Stats.EM,\r\n  ],\r\n};\r\n\r\n// All substats are allowed except for the duplicate of main stat\r\nexport const allowedSubStats: Record<MainStats, SubStats[]> =\r\n  allMainStats.reduce((acc, mainStat) => {\r\n    return {\r\n      ...acc,\r\n      [mainStat]: _.without([mainStat], allSubStats),\r\n    };\r\n  }, {} as Record<MainStats, SubStats[]>);\r\n","import { useCallback } from \"react\";\r\nimport {\r\n  Select as ChakraSelect,\r\n  SelectProps as ChakraSelectProps,\r\n} from \"@chakra-ui/select\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Option = styled.option`\r\n  color: black;\r\n  background: lightgrey;\r\n`;\r\n\r\ntype SelectProps<T extends string> = {\r\n  onChange: (selected: T) => void;\r\n  items: { label: string; value: T }[];\r\n  value: T | undefined;\r\n} & Omit<ChakraSelectProps, \"onChange\" | \"value\">;\r\n\r\nexport function Select<T extends string>({\r\n  onChange,\r\n  value,\r\n  items,\r\n  ...rest\r\n}: SelectProps<T>) {\r\n  const onChangeSelect = useCallback(\r\n    (event) => {\r\n      const value = event.target.value as T;\r\n      onChange(value);\r\n    },\r\n    [onChange]\r\n  );\r\n\r\n  return (\r\n    <ChakraSelect onChange={onChangeSelect} value={value} {...rest}>\r\n      {items.map((item) => {\r\n        return (\r\n          <Option key={item.value} value={item.value}>\r\n            {item.label}\r\n          </Option>\r\n        );\r\n      })}\r\n    </ChakraSelect>\r\n  );\r\n}\r\n","import _ from \"lodash/fp\";\r\n\r\nexport const getMeaningfulPercents = (value: number): string => {\r\n  let formattedChance: string = \"0%\";\r\n  if (_.isNil(value)) {\r\n    return \"\";\r\n  }\r\n  if (value === 0) {\r\n    return formattedChance;\r\n  }\r\n  let n = 0,\r\n    num = 0;\r\n  while (n < 12) {\r\n    num = value * 100 * Math.pow(10, n);\r\n    if (num > 1) {\r\n      break;\r\n    }\r\n    n++;\r\n  }\r\n  return (value * 100).toFixed(n + 2) + \"%\";\r\n};\r\n","import {\r\n  Button,\r\n  IconButton,\r\n  Text,\r\n  Box,\r\n  FormControl,\r\n  FormLabel,\r\n  VStack,\r\n  NumberInput,\r\n  HStack,\r\n  NumberInputField,\r\n  CloseButton,\r\n  Flex,\r\n  Popover,\r\n  PopoverTrigger,\r\n  PopoverContent,\r\n  PopoverBody,\r\n  PopoverArrow,\r\n  PopoverCloseButton,\r\n  Link,\r\n  Switch,\r\n} from \"@chakra-ui/react\";\r\nimport styled from \"styled-components\";\r\nimport { useState, useEffect, memo, ChangeEvent } from \"react\";\r\nimport { MdAddCircle } from \"react-icons/md\";\r\nimport { FaRegQuestionCircle } from \"react-icons/fa\";\r\nimport _ from \"lodash/fp\";\r\n\r\nimport { allowedMainStats, allowedSubStats } from \"../data/combinations\";\r\nimport { MainStats, SubStats, Types } from \"../data/enums\";\r\nimport WorkerCalculateChance from \"../utils/calculateChance.worker\";\r\n// import { calculateChance } from \"../utils/calculateChance\";\r\n\r\nimport { Select } from \"./Select\";\r\nimport { getMeaningfulPercents } from \"../utils/formatNumber\";\r\nimport {\r\n  Area,\r\n  AreaChart,\r\n  CartesianGrid,\r\n  ResponsiveContainer,\r\n  Tooltip,\r\n  XAxis,\r\n  YAxis,\r\n} from \"recharts\";\r\n\r\ninterface FormData {\r\n  acceptBothSets: boolean;\r\n  type: Types;\r\n  mainStat?: MainStats;\r\n  subStats: [SubStats, number, string][];\r\n}\r\n\r\ninterface ChartDataEntry {\r\n  resin: number;\r\n  chance: number;\r\n}\r\n\r\nconst workerInstance = WorkerCalculateChance();\r\n\r\nconst typeOptions: { value: Types; label: string }[] = _.values(Types).map(\r\n  (type) => ({ label: type, value: type })\r\n);\r\n\r\nconst TooltipContainer = styled.div`\r\n  border-radius: 5px;\r\n  background: #313743;\r\n  padding: 5px 10px;\r\n  border: 1px solid white;\r\n`;\r\n\r\nconst QuestionIconContainer = styled.div`\r\n  cursor: pointer;\r\n`;\r\n\r\nconst ResultsBox = memo(\r\n  ({ chance, chartData }: { chance: number; chartData: ChartDataEntry[] }) => {\r\n    return (\r\n      <Box\r\n        margin={1}\r\n        maxW=\"95%\"\r\n        width=\"lg\"\r\n        borderWidth=\"1px\"\r\n        borderRadius=\"lg\"\r\n        padding={2}\r\n        paddingLeft={4}\r\n      >\r\n        <Flex alignItems=\"baseline\" flexFlow=\"row nowrap\">\r\n          <Text>Chance in one run (20 resin):</Text>\r\n          <Text\r\n            paddingLeft={2}\r\n            paddingRight={2}\r\n            fontSize=\"large\"\r\n            fontWeight=\"bold\"\r\n          >\r\n            {getMeaningfulPercents(chance)}\r\n          </Text>\r\n          <Popover>\r\n            <PopoverTrigger>\r\n              <QuestionIconContainer>\r\n                <FaRegQuestionCircle />\r\n              </QuestionIconContainer>\r\n            </PopoverTrigger>\r\n            <PopoverContent color=\"black\" width={\"70%\"}>\r\n              <PopoverArrow />\r\n              <PopoverCloseButton />\r\n              <PopoverBody>\r\n                <Text fontWeight=\"bold\" marginRight={6}>\r\n                  This calculation assumes the following:\r\n                </Text>\r\n                <Text>5* artifacts upgraded to +20;</Text>\r\n                <Text>\r\n                  1.07 artifacts per run on average;{\" \"}\r\n                  <Link\r\n                    color=\"teal\"\r\n                    isExternal\r\n                    href=\"https://docs.google.com/spreadsheets/d/1RcuniapqS6nOP05OCH0ui10Vo3bWu0AvFbhgcHzTybY/edit\"\r\n                  >\r\n                    Source\r\n                  </Link>\r\n                </Text>\r\n                <Text>50% chance to get one of the two sets;</Text>\r\n                <Text>20% chance to get the correct artifact type;</Text>\r\n                <Text>\r\n                  Chance to get the correct main stat and sub-stats;{\" \"}\r\n                  <Link\r\n                    color=\"teal\"\r\n                    isExternal\r\n                    href=\"https://genshin-impact.fandom.com/wiki/Artifacts/Distribution\"\r\n                  >\r\n                    Source 1\r\n                  </Link>\r\n                  {\", \"}\r\n                  <Link\r\n                    color=\"teal\"\r\n                    isExternal\r\n                    href=\"https://docs.google.com/spreadsheets/d/1sYQrV5Yp_QTVEKMLWquMu0mDgHhOO_Rh2LfcWdS_Eno/edit\"\r\n                  >\r\n                    Source 2\r\n                  </Link>\r\n                </Text>\r\n                <Text marginTop={2}>\r\n                  Note: chance to get 4 initial sub-stats is assumed to be 25%.\r\n                </Text>\r\n                <Text>\r\n                  Contact me at{\" \"}\r\n                  <Link\r\n                    color=\"teal\"\r\n                    isExternal\r\n                    href=\"https://www.reddit.com/message/compose/?to=grumd\"\r\n                  >\r\n                    /u/grumd\r\n                  </Link>{\" \"}\r\n                  if you have more accurate information.\r\n                </Text>\r\n              </PopoverBody>\r\n            </PopoverContent>\r\n          </Popover>\r\n        </Flex>\r\n        <Text>Cumulative chance to get this artifact at least once:</Text>\r\n        {chance > 0 && !_.isEmpty(chartData) && (\r\n          <ResponsiveContainer width=\"100%\" aspect={2.5}>\r\n            <AreaChart\r\n              data={chartData}\r\n              margin={{ top: 5, right: 5, bottom: 5, left: 0 }}\r\n            >\r\n              <defs>\r\n                <linearGradient id=\"colorGrad\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                  <stop offset=\"5%\" stopColor=\"#8884d8\" stopOpacity={0.8} />\r\n                  <stop offset=\"95%\" stopColor=\"#8884d8\" stopOpacity={0} />\r\n                </linearGradient>\r\n              </defs>\r\n              <Area\r\n                fillOpacity={1}\r\n                fill=\"url(#colorGrad)\"\r\n                type=\"monotone\"\r\n                dataKey=\"chance\"\r\n                stroke=\"#8884d8\"\r\n              />\r\n              <CartesianGrid stroke=\"#ccc\" strokeDasharray=\"5 5\" />\r\n              <XAxis dataKey=\"resin\" />\r\n              <YAxis\r\n                domain={[0, 1]}\r\n                tickFormatter={(value) => (value * 100).toFixed(0) + \"%\"}\r\n              />\r\n              <Tooltip\r\n                isAnimationActive={false}\r\n                content={({ payload }) => {\r\n                  const item = payload?.[0]?.payload;\r\n                  if (item) {\r\n                    return (\r\n                      <TooltipContainer>\r\n                        <div>Resin: {item.resin}</div>\r\n                        <div>Days: {item.resin / 160}</div>\r\n                        <div>Chance: {getMeaningfulPercents(item.chance)}</div>\r\n                      </TooltipContainer>\r\n                    );\r\n                  }\r\n                  return null;\r\n                }}\r\n              />\r\n            </AreaChart>\r\n          </ResponsiveContainer>\r\n        )}\r\n      </Box>\r\n    );\r\n  }\r\n);\r\n\r\nexport function ArtifactForm() {\r\n  const [formData, setFormData] = useState<FormData>({\r\n    acceptBothSets: false,\r\n    type: Types.Flower,\r\n    subStats: [],\r\n  });\r\n  const [chance, setChance] = useState<number | null>(null);\r\n  const [calculating, setCalculating] = useState<boolean>(false);\r\n  const [chartData, setChartData] = useState<ChartDataEntry[]>([]);\r\n\r\n  const onChangeBothSets = (event: ChangeEvent<HTMLInputElement>) => {\r\n    setFormData((form) => ({\r\n      ...form,\r\n      acceptBothSets: !!event.target.checked,\r\n    }));\r\n  };\r\n\r\n  const onChangeType = (value: Types) => {\r\n    setFormData((form) => ({\r\n      acceptBothSets: form.acceptBothSets,\r\n      type: value,\r\n      subStats: [],\r\n    })); // reset all\r\n  };\r\n\r\n  const onChangeMainStat = (value: MainStats) => {\r\n    setFormData((form) => ({ ...form, mainStat: value, subStats: [] })); // reset sub stats\r\n  };\r\n\r\n  const mainStatOptions = allowedMainStats[formData.type].map((mainStat) => ({\r\n    label: mainStat,\r\n    value: mainStat,\r\n  }));\r\n\r\n  const subStatList = formData.mainStat\r\n    ? allowedSubStats[formData.mainStat]\r\n    : [];\r\n  const subStatOptions = subStatList\r\n    .filter((subStat) => !formData.subStats.find(([s]) => s === subStat))\r\n    .map((subStat) => ({\r\n      label: subStat,\r\n      value: subStat,\r\n    }));\r\n\r\n  useEffect(() => {\r\n    if (!formData.mainStat) {\r\n      setFormData((form) => ({ ...form, mainStat: mainStatOptions[0].value }));\r\n    }\r\n  }, [formData.mainStat, mainStatOptions]);\r\n\r\n  const onAddSubStats = () => {\r\n    if (subStatOptions.length) {\r\n      setFormData((form) => ({\r\n        ...form,\r\n        subStats: [...form.subStats, [subStatOptions[0].value, 0, \"0\"]],\r\n      }));\r\n    }\r\n  };\r\n\r\n  const onChangeSubStat = (subStat: SubStats) => (value: SubStats) => {\r\n    setFormData((form) => ({\r\n      ...form,\r\n      subStats: form.subStats.map((pair) =>\r\n        pair[0] === subStat ? [value, 0, \"0\"] : pair\r\n      ),\r\n    }));\r\n  };\r\n\r\n  const onChangeSubStatNumber =\r\n    (subStat: SubStats) => (stringValue: string, value: number) => {\r\n      console.log(stringValue, value);\r\n      setFormData((form) => ({\r\n        ...form,\r\n        subStats: form.subStats.map((pair) =>\r\n          pair[0] === subStat ? [subStat, value || 0, stringValue || \"0\"] : pair\r\n        ),\r\n      }));\r\n    };\r\n\r\n  const onRemoveSubStat = (subStat: SubStats) => {\r\n    setFormData((form) => ({\r\n      ...form,\r\n      subStats: form.subStats.filter((pair) => pair[0] !== subStat),\r\n    }));\r\n  };\r\n\r\n  const onCalculate = async () => {\r\n    if (formData.mainStat) {\r\n      setCalculating(true);\r\n      const chance = await workerInstance.calculateChance({\r\n        acceptBothSets: formData.acceptBothSets,\r\n        type: formData.type,\r\n        mainStat: formData.mainStat,\r\n        subStats: formData.subStats.reduce((acc, [subStat, value]) => {\r\n          return {\r\n            ...acc,\r\n            [subStat]: value,\r\n          };\r\n        }, {}),\r\n      });\r\n      setCalculating(false);\r\n\r\n      const invertedChance = 1 - chance;\r\n      const cumulativeChartData: { resin: number; chance: number }[] = [];\r\n      let resinSpent = 0,\r\n        cumulativeInvertedChance = 1;\r\n      // 2920 is 365 days of 8 domain runs per day\r\n      for (let i = 0; i < 2920; i++) {\r\n        if (cumulativeInvertedChance < 0.05) {\r\n          break;\r\n        }\r\n        resinSpent += 20;\r\n        cumulativeInvertedChance *= invertedChance;\r\n        cumulativeChartData.push({\r\n          resin: resinSpent,\r\n          chance: 1 - cumulativeInvertedChance,\r\n        });\r\n      }\r\n      setChartData(cumulativeChartData);\r\n      setChance(chance);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Flex flexFlow=\"column wrap\" width=\"100%\" alignItems=\"center\">\r\n      <Box\r\n        margin={1}\r\n        maxW=\"95%\"\r\n        width=\"lg\"\r\n        borderWidth=\"1px\"\r\n        borderRadius=\"lg\"\r\n        padding={2}\r\n      >\r\n        <VStack padding=\"2\" spacing=\"4\">\r\n          <FormControl display=\"flex\" alignItems=\"center\">\r\n            <FormLabel cursor=\"pointer\" htmlFor=\"one-set\" size=\"lg\" mb={1}>\r\n              Accept both artifact sets from a domain\r\n            </FormLabel>\r\n            <Switch\r\n              id=\"one-set\"\r\n              onChange={onChangeBothSets}\r\n              isChecked={formData.acceptBothSets}\r\n            />\r\n          </FormControl>\r\n          <FormControl id=\"type\">\r\n            <FormLabel>Artifact type:</FormLabel>\r\n            <Select\r\n              value={formData.type}\r\n              items={typeOptions}\r\n              onChange={onChangeType}\r\n            />\r\n          </FormControl>\r\n          <FormControl id=\"mainStat\">\r\n            <FormLabel>Main stat:</FormLabel>\r\n            <Select\r\n              value={formData.mainStat}\r\n              items={mainStatOptions}\r\n              onChange={onChangeMainStat}\r\n            />\r\n          </FormControl>\r\n          <FormControl id=\"subStat\">\r\n            <FormLabel>Sub stats (optional):</FormLabel>\r\n            <VStack alignItems=\"start\" width=\"100%\">\r\n              {formData.subStats.map((value, index) => {\r\n                const [subStat, , stringValue] = value;\r\n                return (\r\n                  <HStack key={`substat-${index}`} width=\"100%\">\r\n                    <FormControl id={`substat-${index}-name`}>\r\n                      <Select\r\n                        value={subStat}\r\n                        items={[\r\n                          { label: subStat, value: subStat },\r\n                          ...subStatOptions,\r\n                        ]}\r\n                        onChange={onChangeSubStat(subStat)}\r\n                      />\r\n                    </FormControl>\r\n                    <Text fontWeight=\"bold\" fontSize=\"large\">\r\n                      {\">=\"}\r\n                    </Text>\r\n                    <FormControl id={`substat-${index}-value`}>\r\n                      <NumberInput\r\n                        min={0}\r\n                        defaultValue={0}\r\n                        value={stringValue}\r\n                        onChange={onChangeSubStatNumber(subStat)}\r\n                      >\r\n                        <NumberInputField />\r\n                      </NumberInput>\r\n                    </FormControl>\r\n                    <CloseButton\r\n                      colorScheme=\"blue\"\r\n                      onClick={() => onRemoveSubStat(subStat)}\r\n                    />\r\n                  </HStack>\r\n                );\r\n              })}\r\n              <FormControl>\r\n                {_.keys(formData.subStats).length < 4 && (\r\n                  <IconButton\r\n                    color=\"white\"\r\n                    fontSize=\"2xl\"\r\n                    colorScheme=\"purple\"\r\n                    aria-label=\"Add substat\"\r\n                    onClick={onAddSubStats}\r\n                    icon={<MdAddCircle />}\r\n                  />\r\n                )}\r\n              </FormControl>\r\n            </VStack>\r\n          </FormControl>\r\n          <Button\r\n            disabled={!formData.mainStat}\r\n            colorScheme=\"pink\"\r\n            isLoading={calculating}\r\n            onClick={onCalculate}\r\n          >\r\n            Calculate (may take several seconds)\r\n          </Button>\r\n        </VStack>\r\n      </Box>\r\n      {!_.isNil(chance) && (\r\n        <ResultsBox chance={chance} chartData={chartData}></ResultsBox>\r\n      )}\r\n    </Flex>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\nimport { ArtifactForm } from \"./components/ArtifactForm\";\n\nconst MainContainer = styled.div`\n  background-color: #282c34;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: white;\n`;\n\nfunction App() {\n  return (\n    <MainContainer>\n      <ArtifactForm />\n    </MainContainer>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { ChakraProvider } from \"@chakra-ui/react\";\n\nimport \"./index.css\";\n\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ChakraProvider>\n      <App />\n    </ChakraProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}