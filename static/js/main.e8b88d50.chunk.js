(this["webpackJsonpgenshin-artifact-farm-calculator"]=this["webpackJsonpgenshin-artifact-farm-calculator"]||[]).push([[0],{212:function(t,e,a){var n=a(266),c=["calculateChance","Worker"];t.exports=function(){var t=new Worker(a.p+"967ea5c3a09c68450e27.worker.js",{name:"[hash].worker.js"});return n(t,c),t}},258:function(t,e,a){},403:function(t,e,a){"use strict";a.r(e);var n,c,r,i,o=a(1),s=a.n(o),l=a(98),u=a.n(l),b=a(438),j=(a(258),a(57)),d=a(58),h=a(91),O=a.n(h),f=a(11),p=a(208),x=a(36),m=a(21),g=a(4),S=a(420),v=a(421),y=a(422),C=a(423),w=a(439),E=a(102),F=a(430),k=a(440),D=a(436),P=a(433),A=a(434),H=a(238),M=a(232),B=a(213),T=a(61),R=a.n(T),G=a(435),K=a(209),W=a(5),L=d.a.div(n||(n=Object(j.a)(["\n  background: #333b4d;\n  z-index: 2;\n  padding: 0.5em 1em;\n  border-radius: 0.5em;\n  border: 1px solid white;\n  max-width: 95%;\n  font-size: 90%;\n"]))),_=function(t){var e=t.target,a=t.content,n=Object(o.useState)(!1),c=Object(g.a)(n,2),r=c[0],i=c[1],s=Object(o.useState)(null),l=Object(g.a)(s,2),u=l[0],b=l[1],j=Object(o.useState)(null),d=Object(g.a)(j,2),h=d[0],O=d[1],f=Object(o.useState)(null),p=Object(g.a)(f,2),x=p[0],S=p[1],v=Object(G.a)(u,h,{modifiers:[{name:"arrow",options:{element:x}},{name:"preventOverflow",options:{padding:5}}]}),y=v.styles,C=v.attributes,w=Object(o.useMemo)((function(){return[{current:h},{current:u}]}),[h,u]);Object(K.a)((function(){r&&i(!1)}),{refs:w,ignoreClass:"popup-body",disabled:!r});return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{ref:b,onClick:function(){i((function(t){return!t}))},children:e}),r&&Object(W.jsxs)(L,Object(m.a)(Object(m.a)({className:"popup-body",ref:O,style:y.popper},C.popper),{},{children:[a,Object(W.jsx)("div",{ref:S,style:y.arrow})]}))]})};!function(t){t.Flower="Flower of Life",t.Plume="Plume of Death",t.Sands="Sands of Eon",t.Goblet="Goblet of Eonothem",t.Circlet="Circlet of Logos"}(c||(c={})),function(t){t.HPFlat="HP",t.HP="HP%",t.ATKFlat="ATK",t.ATK="ATK%",t.DEFFlat="DEF",t.DEF="DEF%",t.CR="CRIT Rate%",t.CD="CRIT DMG%",t.ER="Energy Recharge%",t.EM="Elemental Mastery",t.HB="Healing Bonus%",t.Pyro="Pyro DMG Bonus%",t.Electro="Electro DMG Bonus%",t.Cryo="Cryo DMG Bonus%",t.Hydro="Hydro DMG Bonus%",t.Anemo="Anemo DMG Bonus%",t.Geo="Geo DMG Bonus%",t.Physical="Physical DMG Bonus%"}(r||(r={}));var I,z=[r.CR,r.CD,r.ATK,r.ATKFlat,r.HP,r.HPFlat,r.DEF,r.DEFFlat,r.ER,r.EM],N=[r.HPFlat,r.ATKFlat,r.HP,r.ATK,r.DEF,r.ER,r.EM,r.CR,r.CD,r.HB,r.Pyro,r.Electro,r.Cryo,r.Hydro,r.Anemo,r.Geo,r.Physical],V=(i={},Object(f.a)(i,c.Flower,[r.HPFlat]),Object(f.a)(i,c.Plume,[r.ATKFlat]),Object(f.a)(i,c.Sands,[r.HP,r.ATK,r.DEF,r.ER,r.EM]),Object(f.a)(i,c.Goblet,[r.HP,r.ATK,r.DEF,r.Pyro,r.Electro,r.Cryo,r.Hydro,r.Anemo,r.Geo,r.Physical,r.EM]),Object(f.a)(i,c.Circlet,[r.HP,r.ATK,r.DEF,r.CR,r.CD,r.HB,r.EM]),i),q=N.reduce((function(t,e){return Object(m.a)(Object(m.a)({},t),{},Object(f.a)({},e,R.a.without([e],z)))}),{}),Y=a(212),J=a.n(Y),Q=a(239),U=a(419),X=["onChange","value","items"],Z=d.a.option(I||(I=Object(j.a)(["\n  color: black;\n  background: lightgrey;\n"])));function $(t){var e=t.onChange,a=t.value,n=t.items,c=Object(Q.a)(t,X),r=Object(o.useCallback)((function(t){var a=t.target.value;e(a)}),[e]);return Object(W.jsx)(U.a,Object(m.a)(Object(m.a)({onChange:r,value:a},c),{},{children:n.map((function(t){return Object(W.jsx)(Z,{value:t.value,children:t.label},t.value)}))}))}var tt,et,at,nt=function(t){if(R.a.isNil(t))return"";if(0===t)return"0%";for(var e=0;e<12&&!(100*t*Math.pow(10,e)>1);)e++;return(100*t).toFixed(e+2)+"%"},ct=a(424),rt=a(425),it=a(240),ot=a(429),st=a(229),lt=a(230),ut=a(112),bt=J()(),jt=R.a.values(c).map((function(t){return{label:t,value:t}})),dt=d.a.div(tt||(tt=Object(j.a)(["\n  border-radius: 5px;\n  background: #313743;\n  padding: 5px 10px;\n  border: 1px solid white;\n"]))),ht=d.a.div(et||(et=Object(j.a)(["\n  cursor: pointer;\n  font-size: 120%;\n"]))),Ot=Object(o.memo)((function(t){var e=t.chance,a=t.chartData;return Object(W.jsxs)(S.a,{margin:1,maxW:"95%",width:"lg",borderWidth:"1px",borderRadius:"lg",padding:2,paddingLeft:4,children:[Object(W.jsxs)(v.a,{alignItems:"center",flexFlow:"row nowrap",children:[Object(W.jsx)(y.a,{children:"Chance in one run (20 resin):"}),Object(W.jsx)(y.a,{paddingLeft:2,paddingRight:2,fontSize:"large",fontWeight:"bold",children:nt(e)}),Object(W.jsx)(_,{target:Object(W.jsx)(ht,{children:Object(W.jsx)(B.a,{})}),content:Object(W.jsxs)("div",{children:[Object(W.jsx)(y.a,{fontWeight:"bold",marginRight:6,children:"This calculation assumes the following:"}),Object(W.jsx)(y.a,{children:"5* artifacts upgraded to +20;"}),Object(W.jsxs)(y.a,{children:["1.07 artifacts per run on average;"," ",Object(W.jsx)(C.a,{color:"teal",isExternal:!0,href:"https://docs.google.com/spreadsheets/d/1RcuniapqS6nOP05OCH0ui10Vo3bWu0AvFbhgcHzTybY/edit",children:"Source"})]}),Object(W.jsx)(y.a,{children:"50% chance to get one of the two sets;"}),Object(W.jsx)(y.a,{children:"20% chance to get the correct artifact type;"}),Object(W.jsxs)(y.a,{children:["20% chance to get 4 initial sub-stats, and 80% to get 3."," ",Object(W.jsx)(C.a,{color:"teal",isExternal:!0,href:"https://genshin-impact.fandom.com/wiki/Loot_System/Artifact_Drop_Distribution#Initial_Sub_Stat_Number_Distribution",children:"Source"})]}),Object(W.jsxs)(y.a,{children:["Calculated chance to get the correct main stat and sub-stats;"," ",Object(W.jsx)(C.a,{color:"teal",isExternal:!0,href:"https://genshin-impact.fandom.com/wiki/Artifacts/Distribution",children:"Source 1"}),", ",Object(W.jsx)(C.a,{color:"teal",isExternal:!0,href:"https://docs.google.com/spreadsheets/d/1sYQrV5Yp_QTVEKMLWquMu0mDgHhOO_Rh2LfcWdS_Eno/edit",children:"Source 2"})]}),Object(W.jsxs)(y.a,{marginTop:2,children:["Contact me at"," ",Object(W.jsx)(C.a,{color:"teal",isExternal:!0,href:"https://www.reddit.com/message/compose/?to=grumd",children:"/u/grumd"})," ","if you have any questions."]})]})})]}),Object(W.jsx)(y.a,{children:"Cumulative chance to get this artifact at least once:"}),e>0&&!R.a.isEmpty(a)&&Object(W.jsx)(ct.a,{width:"100%",aspect:2.5,children:Object(W.jsxs)(rt.a,{data:a,margin:{top:5,right:5,bottom:5,left:0},children:[Object(W.jsx)("defs",{children:Object(W.jsxs)("linearGradient",{id:"colorGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(W.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),Object(W.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),Object(W.jsx)(it.a,{fillOpacity:1,fill:"url(#colorGrad)",type:"monotone",dataKey:"chance",stroke:"#8884d8"}),Object(W.jsx)(ot.a,{stroke:"#ccc",strokeDasharray:"5 5"}),Object(W.jsx)(st.a,{dataKey:"resin"}),Object(W.jsx)(lt.a,{domain:[0,1],tickFormatter:function(t){return(100*t).toFixed(0)+"%"}}),Object(W.jsx)(ut.a,{isAnimationActive:!1,content:function(t){var e,a=t.payload,n=null===a||void 0===a||null===(e=a[0])||void 0===e?void 0:e.payload;return n?Object(W.jsxs)(dt,{children:[Object(W.jsxs)("div",{children:["Resin: ",n.resin]}),Object(W.jsxs)("div",{children:["Days: ",n.resin/160]}),Object(W.jsxs)("div",{children:["Chance: ",nt(n.chance)]})]}):null}})]})})]})}));function ft(){var t=Object(o.useState)({acceptBothSets:!1,type:c.Flower,subStats:[]}),e=Object(g.a)(t,2),a=e[0],n=e[1],r=Object(o.useState)(null),i=Object(g.a)(r,2),s=i[0],l=i[1],u=Object(o.useState)(!1),b=Object(g.a)(u,2),j=b[0],d=b[1],h=Object(o.useState)([]),C=Object(g.a)(h,2),B=C[0],T=C[1],G=V[a.type].map((function(t){return{label:t,value:t}})),K=(a.mainStat?q[a.mainStat]:[]).filter((function(t){return!a.subStats.find((function(e){return Object(g.a)(e,1)[0]===t}))})).map((function(t){return{label:t,value:t}}));Object(o.useEffect)((function(){a.mainStat||n((function(t){return Object(m.a)(Object(m.a)({},t),{},{mainStat:G[0].value})}))}),[a.mainStat,G]);var L=function(t){return function(e){n((function(a){return Object(m.a)(Object(m.a)({},a),{},{subStats:a.subStats.map((function(a){return a[0]===t?[e,0,"0"]:a}))})}))}},_=function(t){return function(e,a){console.log(e,a),n((function(n){return Object(m.a)(Object(m.a)({},n),{},{subStats:n.subStats.map((function(n){return n[0]===t?[t,a||0,e||"0"]:n}))})}))}},I=function(){var t=Object(p.a)(O.a.mark((function t(){var e,n,c,r,i,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.mainStat){t.next=21;break}return d(!0),t.next=4,bt.calculateChance({acceptBothSets:a.acceptBothSets,type:a.type,mainStat:a.mainStat,subStats:a.subStats.reduce((function(t,e){var a=Object(g.a)(e,2),n=a[0],c=a[1];return Object(m.a)(Object(m.a)({},t),{},Object(f.a)({},n,c))}),{})});case 4:e=t.sent,d(!1),n=1-e,c=[],r=0,i=1,o=0;case 10:if(!(o<2920)){t.next=19;break}if(!(i<.05)){t.next=13;break}return t.abrupt("break",19);case 13:r+=20,i*=n,c.push({resin:r,chance:1-i});case 16:o++,t.next=10;break;case 19:T(c),l(e);case 21:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(W.jsxs)(v.a,{flexFlow:"column wrap",width:"100%",alignItems:"center",children:[Object(W.jsx)(S.a,{margin:1,maxW:"95%",width:"lg",borderWidth:"1px",borderRadius:"lg",padding:2,children:Object(W.jsxs)(w.b,{padding:"2",spacing:"4",children:[Object(W.jsxs)(E.a,{display:"flex",alignItems:"center",children:[Object(W.jsx)(F.a,{cursor:"pointer",htmlFor:"one-set",size:"lg",mb:1,children:"Accept both artifact sets from a domain"}),Object(W.jsx)(k.a,{id:"one-set",onChange:function(t){n((function(e){return Object(m.a)(Object(m.a)({},e),{},{acceptBothSets:!!t.target.checked})}))},isChecked:a.acceptBothSets})]}),Object(W.jsxs)(E.a,{id:"type",children:[Object(W.jsx)(F.a,{children:"Artifact type:"}),Object(W.jsx)($,{value:a.type,items:jt,onChange:function(t){n((function(e){return{acceptBothSets:e.acceptBothSets,type:t,subStats:[]}}))}})]}),Object(W.jsxs)(E.a,{id:"mainStat",children:[Object(W.jsx)(F.a,{children:"Main stat:"}),Object(W.jsx)($,{value:a.mainStat,items:G,onChange:function(t){n((function(e){return Object(m.a)(Object(m.a)({},e),{},{mainStat:t,subStats:[]})}))}})]}),Object(W.jsxs)(E.a,{id:"subStat",children:[Object(W.jsx)(F.a,{children:"Sub stats (optional):"}),Object(W.jsxs)(w.b,{alignItems:"start",width:"100%",children:[a.subStats.map((function(t,e){var a=Object(g.a)(t,3),c=a[0],r=a[2];return Object(W.jsxs)(w.a,{width:"100%",children:[Object(W.jsx)(E.a,{id:"substat-".concat(e,"-name"),children:Object(W.jsx)($,{value:c,items:[{label:c,value:c}].concat(Object(x.a)(K)),onChange:L(c)})}),Object(W.jsx)(y.a,{fontWeight:"bold",fontSize:"large",children:">="}),Object(W.jsx)(E.a,{id:"substat-".concat(e,"-value"),children:Object(W.jsx)(D.a,{min:0,defaultValue:0,value:r,onChange:_(c),children:Object(W.jsx)(D.b,{})})}),Object(W.jsx)(P.a,{colorScheme:"blue",onClick:function(){return function(t){n((function(e){return Object(m.a)(Object(m.a)({},e),{},{subStats:e.subStats.filter((function(e){return e[0]!==t}))})}))}(c)}})]},"substat-".concat(e))})),Object(W.jsx)(E.a,{children:R.a.keys(a.subStats).length<4&&Object(W.jsx)(A.a,{color:"white",fontSize:"2xl",colorScheme:"purple","aria-label":"Add substat",onClick:function(){K.length&&n((function(t){return Object(m.a)(Object(m.a)({},t),{},{subStats:[].concat(Object(x.a)(t.subStats),[[K[0].value,0,"0"]])})}))},icon:Object(W.jsx)(M.a,{})})})]})]}),Object(W.jsx)(H.a,{disabled:!a.mainStat,colorScheme:"pink",isLoading:j,onClick:I,children:"Calculate (may take several seconds)"})]})}),!R.a.isNil(s)&&Object(W.jsx)(Ot,{chance:s,chartData:B})]})}var pt=d.a.div(at||(at=Object(j.a)(["\n  background-color: #282c34;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: white;\n"])));var xt=function(){return Object(W.jsx)(pt,{children:Object(W.jsx)(ft,{})})},mt=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,442)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),n(t),c(t),r(t),i(t)}))};u.a.render(Object(W.jsx)(s.a.StrictMode,{children:Object(W.jsx)(b.a,{children:Object(W.jsx)(xt,{})})}),document.getElementById("root")),mt()}},[[403,1,2]]]);
//# sourceMappingURL=main.e8b88d50.chunk.js.map