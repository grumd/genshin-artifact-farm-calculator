(this["webpackJsonpgenshin-artifact-farm-calculator"]=this["webpackJsonpgenshin-artifact-farm-calculator"]||[]).push([[0],{214:function(t,e,a){var n=a(269),c=["calculateChance","Worker"];t.exports=function(){var t=new Worker(a.p+"967ea5c3a09c68450e27.worker.js",{name:"[hash].worker.js"});return n(t,c),t}},263:function(t,e,a){},408:function(t,e,a){"use strict";a.r(e);var n,c,r,i=a(1),s=a.n(i),o=a(100),l=a.n(o),u=a(445),j=(a(263),a(79)),b=a(80),d=a(94),h=a.n(d),O=a(9),f=a(213),x=a(32),p=a(28),m=a(4),g=a(427),S=a(428),v=a(429),y=a(442),C=a(432),E=a(446),F=a(104),w=a(439),k=a(447),D=a(443),P=a(431),A=a(441),H=a(243),B=a(237),M=a(219),T=a(63),R=a.n(T);!function(t){t.Flower="Flower of Life",t.Plume="Plume of Death",t.Sands="Sands of Eon",t.Goblet="Goblet of Eonothem",t.Circlet="Circlet of Logos"}(n||(n={})),function(t){t.HPFlat="HP",t.HP="HP%",t.ATKFlat="ATK",t.ATK="ATK%",t.DEFFlat="DEF",t.DEF="DEF%",t.CR="CRIT Rate%",t.CD="CRIT DMG%",t.ER="Energy Recharge%",t.EM="Elemental Mastery",t.HB="Healing Bonus%",t.Pyro="Pyro DMG Bonus%",t.Electro="Electro DMG Bonus%",t.Cryo="Cryo DMG Bonus%",t.Hydro="Hydro DMG Bonus%",t.Anemo="Anemo DMG Bonus%",t.Geo="Geo DMG Bonus%",t.Physical="Physical DMG Bonus%"}(c||(c={}));var G,K=[c.CR,c.CD,c.ATK,c.ATKFlat,c.HP,c.HPFlat,c.DEF,c.DEFFlat,c.ER,c.EM],W=[c.HPFlat,c.ATKFlat,c.HP,c.ATK,c.DEF,c.ER,c.EM,c.CR,c.CD,c.HB,c.Pyro,c.Electro,c.Cryo,c.Hydro,c.Anemo,c.Geo,c.Physical],L=(r={},Object(O.a)(r,n.Flower,[c.HPFlat]),Object(O.a)(r,n.Plume,[c.ATKFlat]),Object(O.a)(r,n.Sands,[c.HP,c.ATK,c.DEF,c.ER,c.EM]),Object(O.a)(r,n.Goblet,[c.HP,c.ATK,c.DEF,c.Pyro,c.Electro,c.Cryo,c.Hydro,c.Anemo,c.Geo,c.Physical,c.EM]),Object(O.a)(r,n.Circlet,[c.HP,c.ATK,c.DEF,c.CR,c.CD,c.HB,c.EM]),r),I=W.reduce((function(t,e){return Object(p.a)(Object(p.a)({},t),{},Object(O.a)({},e,R.a.without([e],K)))}),{}),z=a(214),V=a.n(z),N=a(244),Y=a(425),_=a(5),q=["onChange","value","items"],J=b.a.option(G||(G=Object(j.a)(["\n  color: black;\n  background: lightgrey;\n"])));function Q(t){var e=t.onChange,a=t.value,n=t.items,c=Object(N.a)(t,q),r=Object(i.useCallback)((function(t){var a=t.target.value;e(a)}),[e]);return Object(_.jsx)(Y.a,Object(p.a)(Object(p.a)({onChange:r,value:a},c),{},{children:n.map((function(t){return Object(_.jsx)(J,{value:t.value,children:t.label},t.value)}))}))}var U,X,Z,$=function(t){if(R.a.isNil(t))return"";if(0===t)return"0%";for(var e=0;e<12&&!(100*t*Math.pow(10,e)>1);)e++;return(100*t).toFixed(e+2)+"%"},tt=a(433),et=a(434),at=a(245),nt=a(438),ct=a(235),rt=a(236),it=a(114),st=V()(),ot=R.a.values(n).map((function(t){return{label:t,value:t}})),lt=b.a.div(U||(U=Object(j.a)(["\n  border-radius: 5px;\n  background: #313743;\n  padding: 5px 10px;\n  border: 1px solid white;\n"]))),ut=b.a.div(X||(X=Object(j.a)(["\n  cursor: pointer;\n"]))),jt=Object(i.memo)((function(t){var e=t.chance,a=t.chartData;return Object(_.jsxs)(g.a,{margin:1,maxW:"95%",width:"lg",borderWidth:"1px",borderRadius:"lg",padding:2,paddingLeft:4,children:[Object(_.jsxs)(S.a,{alignItems:"baseline",flexFlow:"row nowrap",children:[Object(_.jsx)(v.a,{children:"Chance in one run (20 resin):"}),Object(_.jsx)(v.a,{paddingLeft:2,paddingRight:2,fontSize:"large",fontWeight:"bold",children:$(e)}),Object(_.jsxs)(y.a,{children:[Object(_.jsx)(y.f,{children:Object(_.jsx)(ut,{children:Object(_.jsx)(M.a,{})})}),Object(_.jsxs)(y.e,{color:"black",width:"70%",children:[Object(_.jsx)(y.b,{}),Object(_.jsx)(y.d,{}),Object(_.jsxs)(y.c,{children:[Object(_.jsx)(v.a,{fontWeight:"bold",marginRight:6,children:"This calculation assumes the following:"}),Object(_.jsx)(v.a,{children:"5* artifacts upgraded to +20;"}),Object(_.jsxs)(v.a,{children:["1.07 artifacts per run on average;"," ",Object(_.jsx)(C.a,{color:"teal",isExternal:!0,href:"https://docs.google.com/spreadsheets/d/1RcuniapqS6nOP05OCH0ui10Vo3bWu0AvFbhgcHzTybY/edit",children:"Source"})]}),Object(_.jsx)(v.a,{children:"50% chance to get one of the two sets;"}),Object(_.jsx)(v.a,{children:"20% chance to get the correct artifact type;"}),Object(_.jsxs)(v.a,{children:["Chance to get the correct main stat and sub-stats;"," ",Object(_.jsx)(C.a,{color:"teal",isExternal:!0,href:"https://genshin-impact.fandom.com/wiki/Artifacts/Distribution",children:"Source 1"}),", ",Object(_.jsx)(C.a,{color:"teal",isExternal:!0,href:"https://docs.google.com/spreadsheets/d/1sYQrV5Yp_QTVEKMLWquMu0mDgHhOO_Rh2LfcWdS_Eno/edit",children:"Source 2"})]}),Object(_.jsx)(v.a,{marginTop:2,children:"Note: chance to get 4 initial sub-stats is assumed to be 25%."}),Object(_.jsxs)(v.a,{children:["Contact me at"," ",Object(_.jsx)(C.a,{color:"teal",isExternal:!0,href:"https://www.reddit.com/message/compose/?to=grumd",children:"/u/grumd"})," ","if you have more accurate information."]})]})]})]})]}),Object(_.jsx)(v.a,{children:"Cumulative chance to get this artifact at least once:"}),e>0&&!R.a.isEmpty(a)&&Object(_.jsx)(tt.a,{width:"100%",aspect:2.5,children:Object(_.jsxs)(et.a,{data:a,margin:{top:5,right:5,bottom:5,left:0},children:[Object(_.jsx)("defs",{children:Object(_.jsxs)("linearGradient",{id:"colorGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(_.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),Object(_.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),Object(_.jsx)(at.a,{fillOpacity:1,fill:"url(#colorGrad)",type:"monotone",dataKey:"chance",stroke:"#8884d8"}),Object(_.jsx)(nt.a,{stroke:"#ccc",strokeDasharray:"5 5"}),Object(_.jsx)(ct.a,{dataKey:"resin"}),Object(_.jsx)(rt.a,{domain:[0,1],tickFormatter:function(t){return(100*t).toFixed(0)+"%"}}),Object(_.jsx)(it.a,{isAnimationActive:!1,content:function(t){var e,a=t.payload,n=null===a||void 0===a||null===(e=a[0])||void 0===e?void 0:e.payload;return n?Object(_.jsxs)(lt,{children:[Object(_.jsxs)("div",{children:["Resin: ",n.resin]}),Object(_.jsxs)("div",{children:["Days: ",n.resin/160]}),Object(_.jsxs)("div",{children:["Chance: ",$(n.chance)]})]}):null}})]})})]})}));function bt(){var t=Object(i.useState)({acceptBothSets:!1,type:n.Flower,subStats:[]}),e=Object(m.a)(t,2),a=e[0],c=e[1],r=Object(i.useState)(null),s=Object(m.a)(r,2),o=s[0],l=s[1],u=Object(i.useState)(!1),j=Object(m.a)(u,2),b=j[0],d=j[1],y=Object(i.useState)([]),C=Object(m.a)(y,2),M=C[0],T=C[1],G=L[a.type].map((function(t){return{label:t,value:t}})),K=(a.mainStat?I[a.mainStat]:[]).filter((function(t){return!a.subStats.find((function(e){return Object(m.a)(e,1)[0]===t}))})).map((function(t){return{label:t,value:t}}));Object(i.useEffect)((function(){a.mainStat||c((function(t){return Object(p.a)(Object(p.a)({},t),{},{mainStat:G[0].value})}))}),[a.mainStat,G]);var W=function(t){return function(e){c((function(a){return Object(p.a)(Object(p.a)({},a),{},{subStats:a.subStats.map((function(a){return a[0]===t?[e,0,"0"]:a}))})}))}},z=function(t){return function(e,a){console.log(e,a),c((function(n){return Object(p.a)(Object(p.a)({},n),{},{subStats:n.subStats.map((function(n){return n[0]===t?[t,a||0,e||"0"]:n}))})}))}},V=function(){var t=Object(f.a)(h.a.mark((function t(){var e,n,c,r,i,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.mainStat){t.next=21;break}return d(!0),t.next=4,st.calculateChance({acceptBothSets:a.acceptBothSets,type:a.type,mainStat:a.mainStat,subStats:a.subStats.reduce((function(t,e){var a=Object(m.a)(e,2),n=a[0],c=a[1];return Object(p.a)(Object(p.a)({},t),{},Object(O.a)({},n,c))}),{})});case 4:e=t.sent,d(!1),n=1-e,c=[],r=0,i=1,s=0;case 10:if(!(s<2920)){t.next=19;break}if(!(i<.05)){t.next=13;break}return t.abrupt("break",19);case 13:r+=20,i*=n,c.push({resin:r,chance:1-i});case 16:s++,t.next=10;break;case 19:T(c),l(e);case 21:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(_.jsxs)(S.a,{flexFlow:"column wrap",width:"100%",alignItems:"center",children:[Object(_.jsx)(g.a,{margin:1,maxW:"95%",width:"lg",borderWidth:"1px",borderRadius:"lg",padding:2,children:Object(_.jsxs)(E.b,{padding:"2",spacing:"4",children:[Object(_.jsxs)(F.a,{display:"flex",alignItems:"center",children:[Object(_.jsx)(w.a,{cursor:"pointer",htmlFor:"one-set",size:"lg",mb:1,children:"Accept both artifact sets from a domain"}),Object(_.jsx)(k.a,{id:"one-set",onChange:function(t){c((function(e){return Object(p.a)(Object(p.a)({},e),{},{acceptBothSets:!!t.target.checked})}))},isChecked:a.acceptBothSets})]}),Object(_.jsxs)(F.a,{id:"type",children:[Object(_.jsx)(w.a,{children:"Artifact type:"}),Object(_.jsx)(Q,{value:a.type,items:ot,onChange:function(t){c((function(e){return{acceptBothSets:e.acceptBothSets,type:t,subStats:[]}}))}})]}),Object(_.jsxs)(F.a,{id:"mainStat",children:[Object(_.jsx)(w.a,{children:"Main stat:"}),Object(_.jsx)(Q,{value:a.mainStat,items:G,onChange:function(t){c((function(e){return Object(p.a)(Object(p.a)({},e),{},{mainStat:t,subStats:[]})}))}})]}),Object(_.jsxs)(F.a,{id:"subStat",children:[Object(_.jsx)(w.a,{children:"Sub stats (optional):"}),Object(_.jsxs)(E.b,{alignItems:"start",width:"100%",children:[a.subStats.map((function(t,e){var a=Object(m.a)(t,3),n=a[0],r=a[2];return Object(_.jsxs)(E.a,{width:"100%",children:[Object(_.jsx)(F.a,{id:"substat-".concat(e,"-name"),children:Object(_.jsx)(Q,{value:n,items:[{label:n,value:n}].concat(Object(x.a)(K)),onChange:W(n)})}),Object(_.jsx)(v.a,{fontWeight:"bold",fontSize:"large",children:">="}),Object(_.jsx)(F.a,{id:"substat-".concat(e,"-value"),children:Object(_.jsx)(D.a,{min:0,defaultValue:0,value:r,onChange:z(n),children:Object(_.jsx)(D.b,{})})}),Object(_.jsx)(P.a,{colorScheme:"blue",onClick:function(){return function(t){c((function(e){return Object(p.a)(Object(p.a)({},e),{},{subStats:e.subStats.filter((function(e){return e[0]!==t}))})}))}(n)}})]},"substat-".concat(e))})),Object(_.jsx)(F.a,{children:R.a.keys(a.subStats).length<4&&Object(_.jsx)(A.a,{color:"white",fontSize:"2xl",colorScheme:"purple","aria-label":"Add substat",onClick:function(){K.length&&c((function(t){return Object(p.a)(Object(p.a)({},t),{},{subStats:[].concat(Object(x.a)(t.subStats),[[K[0].value,0,"0"]])})}))},icon:Object(_.jsx)(B.a,{})})})]})]}),Object(_.jsx)(H.a,{disabled:!a.mainStat,colorScheme:"pink",isLoading:b,onClick:V,children:"Calculate (may take several seconds)"})]})}),!R.a.isNil(o)&&Object(_.jsx)(jt,{chance:o,chartData:M})]})}var dt=b.a.div(Z||(Z=Object(j.a)(["\n  background-color: #282c34;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: white;\n"])));var ht=function(){return Object(_.jsx)(dt,{children:Object(_.jsx)(bt,{})})},Ot=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,448)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),n(t),c(t),r(t),i(t)}))};l.a.render(Object(_.jsx)(s.a.StrictMode,{children:Object(_.jsx)(u.a,{children:Object(_.jsx)(ht,{})})}),document.getElementById("root")),Ot()}},[[408,1,2]]]);
//# sourceMappingURL=main.2ddd5374.chunk.js.map