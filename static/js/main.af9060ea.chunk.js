(this["webpackJsonpgenshin-artifact-farm-calculator"]=this["webpackJsonpgenshin-artifact-farm-calculator"]||[]).push([[0],{232:function(e,t,n){var a=n(402),c=["calculateChance","Worker"];e.exports=function(){var e=new Worker(n.p+"496ffebe93a5d82d2a84.worker.js",{name:"[hash].worker.js"});return a(e,c),e}},258:function(e,t,n){},403:function(e,t,n){"use strict";n.r(t);var a,c,r,i,o,s,l,u,b=n(1),j=n.n(b),d=n(98),h=n.n(d),O=n(438),f=(n(258),n(50)),p=n(51),m=n(91),x=n.n(m),g=n(11),S=n(209),y=n(36),v=n(21),C=n(5),w=n(421),F=n(420),E=n(439),D=n(104),k=n(431),M=n(440),P=n(422),T=n(436),A=n(433),H=n(434),R=n(239),B=n(233),G=n(44),K=n.n(G),I=n(423),W=n(424),L=n(425),z=n(241),_=n(429),N=n(230),V=n(231),q=n(112),Y=n(214),J=n(435),Q=n(210),$=n(4),U=p.a.div(a||(a=Object(f.a)(["\n  background: #333b4d;\n  z-index: 2;\n  padding: 0.5em 1em;\n  border-radius: 0.5em;\n  border: 1px solid white;\n  max-width: 95%;\n  font-size: 90%;\n"]))),X=function(e){var t=e.target,n=e.content,a=Object(b.useState)(!1),c=Object(C.a)(a,2),r=c[0],i=c[1],o=Object(b.useState)(null),s=Object(C.a)(o,2),l=s[0],u=s[1],j=Object(b.useState)(null),d=Object(C.a)(j,2),h=d[0],O=d[1],f=Object(b.useState)(null),p=Object(C.a)(f,2),m=p[0],x=p[1],g=Object(J.a)(l,h,{modifiers:[{name:"arrow",options:{element:m}},{name:"preventOverflow",options:{padding:5}}]}),S=g.styles,y=g.attributes,w=Object(b.useMemo)((function(){return[{current:h},{current:l}]}),[h,l]);Object(Q.a)((function(){r&&i(!1)}),{refs:w,ignoreClass:"popup-body",disabled:!r});return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("div",{ref:u,onClick:function(){i((function(e){return!e}))},children:t}),r&&Object($.jsxs)(U,Object(v.a)(Object(v.a)({className:"popup-body",ref:O,style:S.popper},y.popper),{},{children:[n,Object($.jsx)("div",{ref:x,style:S.arrow})]}))]})},Z=function(e){if(K.a.isNil(e)||!Number.isFinite(e))return"";if(0===e)return"0%";for(var t=0;t<12&&!(100*e*Math.pow(10,t)>1);)t++;return(100*e).toFixed(t+2).replace(/([1-9])?\.?0+$/,"$1")+"%"},ee=Intl&&Intl.RelativeTimeFormat&&new Intl.RelativeTimeFormat("en",{style:"short",numeric:"always"}),te=function(e){return function(t){return ee?ee.format(Math.round(t/e),"days"):"".concat(t)}},ne=p.a.div(c||(c=Object(f.a)(["\n  border-radius: 5px;\n  background: #313743;\n  padding: 5px 10px;\n  border: 1px solid white;\n"]))),ae=p.a.div(r||(r=Object(f.a)(["\n  cursor: pointer;\n  font-size: 120%;\n"]))),ce=Object(p.a)(T.a)(i||(i=Object(f.a)(["\n  width: 3em;\n  margin-left: 0.3em;\n  display: inline-block;\n  & > input {\n    padding: 0.3em;\n    height: 1.75em;\n  }\n"]))),re=Object(b.memo)((function(e){var t=e.chances,n=Object(b.useState)("160"),a=Object(C.a)(n,2),c=a[0],r=a[1],i=Number(c),o=isNaN(i)||i<1?160:i,s=t.chance,l=Object(b.useMemo)((function(){for(var e=1-s,t=[],n=0,a=1,c=Math.floor(o/20),r=s<.02?c:1,i=0;i<365*c&&!(a<.05);i++)n+=20,a*=e,(i+1)%r||t.push({resin:n,chance:1-a});return t}),[s,o]);return Object($.jsxs)(F.a,{margin:1,maxW:"95%",width:"lg",borderWidth:"1px",borderRadius:"lg",padding:2,paddingLeft:4,children:[K.a.isNumber(t.chanceSubsMatch)&&Object($.jsxs)(w.a,{alignItems:"center",flexFlow:"row nowrap",children:[Object($.jsx)(P.a,{children:"Chance of getting an artifact with these stats:"}),Object($.jsx)(P.a,{paddingLeft:2,paddingRight:2,fontSize:"120%",fontWeight:"bold",children:Z(t.chanceSubsMatch)})]}),K.a.isNumber(t.upgradeChance)&&Object($.jsxs)(w.a,{alignItems:"center",flexFlow:"row nowrap",children:[Object($.jsx)(P.a,{children:"Chance of upgrading to desired numbers:"}),Object($.jsx)(P.a,{paddingLeft:2,paddingRight:2,fontSize:"120%",fontWeight:"bold",children:Z(t.upgradeChance)})]}),Object($.jsxs)(w.a,{alignItems:"center",flexFlow:"row nowrap",children:[Object($.jsx)(P.a,{children:"Total chance in one run (20 resin):"}),Object($.jsx)(P.a,{paddingLeft:2,paddingRight:2,fontSize:"120%",fontWeight:"bold",children:Z(t.chance)}),Object($.jsx)(X,{target:Object($.jsx)(ae,{children:Object($.jsx)(Y.a,{})}),content:Object($.jsxs)("div",{children:[Object($.jsx)(P.a,{fontWeight:"bold",marginRight:6,children:"This calculation assumes the following:"}),Object($.jsx)(P.a,{children:"5* artifacts upgraded to +20;"}),Object($.jsx)(P.a,{children:"50% chance to get one of the two sets;"}),Object($.jsx)(P.a,{children:"20% chance to get the correct artifact type;"}),Object($.jsxs)(P.a,{children:["20% chance to get 4 initial sub-stats, and 80% to get 3."," ",Object($.jsx)(I.a,{color:"teal",isExternal:!0,href:"https://genshin-impact.fandom.com/wiki/Loot_System/Artifact_Drop_Distribution#Initial_Sub_Stat_Number_Distribution",children:"Source"})]}),Object($.jsxs)(P.a,{children:["Calculated chance to get the correct main stat and sub-stats;"," ",Object($.jsx)(I.a,{color:"teal",isExternal:!0,href:"https://genshin-impact.fandom.com/wiki/Artifacts/Distribution",children:"Source 1"}),", ",Object($.jsx)(I.a,{color:"teal",isExternal:!0,href:"https://docs.google.com/spreadsheets/d/1sYQrV5Yp_QTVEKMLWquMu0mDgHhOO_Rh2LfcWdS_Eno/edit",children:"Source 2"})]}),Object($.jsxs)(P.a,{children:["7% chance of getting two 5* artifacts per run;"," ",Object($.jsx)(I.a,{color:"teal",isExternal:!0,href:"https://docs.google.com/spreadsheets/d/1RcuniapqS6nOP05OCH0ui10Vo3bWu0AvFbhgcHzTybY/edit",children:"Source"})]}),Object($.jsxs)(P.a,{marginTop:2,children:["Contact me at"," ",Object($.jsx)(I.a,{color:"teal",isExternal:!0,href:"https://www.reddit.com/message/compose/?to=grumd",children:"/u/grumd"})," ","if you have any questions."]})]})})]}),Object($.jsxs)(P.a,{css:{},children:["Chance to get this artifact at least once (",Object($.jsx)(ce,{min:20,defaultValue:160,value:c,onChange:r,children:Object($.jsx)(T.b,{})})," ","resin per day):"]}),t.chance>0&&!K.a.isEmpty(l)&&Object($.jsx)(W.a,{width:"100%",aspect:2.5,children:Object($.jsxs)(L.a,{data:l,margin:{top:5,right:5,bottom:5,left:-15},children:[Object($.jsx)("defs",{children:Object($.jsxs)("linearGradient",{id:"colorGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object($.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),Object($.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),Object($.jsx)(z.a,{fillOpacity:1,fill:"url(#colorGrad)",type:"monotone",dataKey:"chance",stroke:"#8884d8"}),Object($.jsx)(_.a,{stroke:"#ccc",strokeDasharray:"5 5"}),Object($.jsx)(N.a,{dataKey:"resin",minTickGap:40,tickFormatter:te(o)}),Object($.jsx)(V.a,{domain:[0,1],tickFormatter:function(e){return(100*e).toFixed(0)+"%"}}),Object($.jsx)(q.a,{isAnimationActive:!1,content:function(e){var t,n=e.payload,a=null===n||void 0===n||null===(t=n[0])||void 0===t?void 0:t.payload;return a?Object($.jsxs)(ne,{children:[Object($.jsxs)("div",{children:["Resin: ",a.resin]}),Object($.jsxs)("div",{children:["Days: ",a.resin/o]}),Object($.jsxs)("div",{children:["Chance: ",Z(a.chance)]})]}):null}})]})})]})})),ie=n(240),oe=n(430),se=["onChange","value","items"],le=p.a.option(o||(o=Object(f.a)(["\n  color: black;\n  background: lightgrey;\n"])));function ue(e){var t=e.onChange,n=e.value,a=e.items,c=Object(ie.a)(e,se),r=Object(b.useCallback)((function(e){var n=e.target.value;t(n)}),[t]);return Object($.jsx)(oe.a,Object(v.a)(Object(v.a)({onChange:r,value:n},c),{},{children:a.map((function(e){return Object($.jsx)(le,{value:e.value,children:e.label},e.value)}))}))}!function(e){e.Flower="Flower of Life",e.Plume="Plume of Death",e.Sands="Sands of Eon",e.Goblet="Goblet of Eonothem",e.Circlet="Circlet of Logos"}(s||(s={})),function(e){e.HPFlat="HP",e.HP="HP%",e.ATKFlat="ATK",e.ATK="ATK%",e.DEFFlat="DEF",e.DEF="DEF%",e.CR="CRIT Rate%",e.CD="CRIT DMG%",e.ER="Energy Recharge%",e.EM="Elemental Mastery",e.HB="Healing Bonus%",e.Pyro="Pyro DMG Bonus%",e.Electro="Electro DMG Bonus%",e.Cryo="Cryo DMG Bonus%",e.Hydro="Hydro DMG Bonus%",e.Anemo="Anemo DMG Bonus%",e.Geo="Geo DMG Bonus%",e.Physical="Physical DMG Bonus%",e.Dendro="Dendro DMG Bonus%"}(l||(l={}));var be,je=[l.CR,l.CD,l.ATK,l.ATKFlat,l.HP,l.HPFlat,l.DEF,l.DEFFlat,l.ER,l.EM],de=[l.HPFlat,l.ATKFlat,l.HP,l.ATK,l.DEF,l.ER,l.EM,l.CR,l.CD,l.HB,l.Pyro,l.Electro,l.Cryo,l.Hydro,l.Anemo,l.Geo,l.Physical,l.Dendro],he=(u={},Object(g.a)(u,s.Flower,[l.HPFlat]),Object(g.a)(u,s.Plume,[l.ATKFlat]),Object(g.a)(u,s.Sands,[l.HP,l.ATK,l.DEF,l.ER,l.EM]),Object(g.a)(u,s.Goblet,[l.HP,l.ATK,l.DEF,l.Pyro,l.Electro,l.Cryo,l.Hydro,l.Anemo,l.Geo,l.Physical,l.Dendro,l.EM]),Object(g.a)(u,s.Circlet,[l.HP,l.ATK,l.DEF,l.CR,l.CD,l.HB,l.EM]),u),Oe=de.reduce((function(e,t){return Object(v.a)(Object(v.a)({},e),{},Object(g.a)({},t,K.a.without([t],je)))}),{}),fe=n(232),pe=n.n(fe)()(),me=K.a.values(s).map((function(e){return{label:e,value:e}}));function xe(){var e=Object(b.useState)({acceptBothSets:!1,type:s.Flower,subStats:[]}),t=Object(C.a)(e,2),n=t[0],a=t[1],c=Object(b.useState)({chance:0}),r=Object(C.a)(c,2),i=r[0],o=r[1],l=Object(b.useState)(!1),u=Object(C.a)(l,2),j=u[0],d=u[1],h=he[n.type].map((function(e){return{label:e,value:e}})),O=(n.mainStat?Oe[n.mainStat]:[]).filter((function(e){return!n.subStats.find((function(t){return Object(C.a)(t,1)[0]===e}))})).map((function(e){return{label:e,value:e}}));Object(b.useEffect)((function(){n.mainStat||a((function(e){return Object(v.a)(Object(v.a)({},e),{},{mainStat:h[0].value})}))}),[n.mainStat,h]);var f=function(e){return function(t){a((function(n){return Object(v.a)(Object(v.a)({},n),{},{subStats:n.subStats.map((function(n){return n[0]===e?[t,0,"0"]:n}))})}))}},p=function(e){return function(t,n){a((function(a){return Object(v.a)(Object(v.a)({},a),{},{subStats:a.subStats.map((function(a){return a[0]===e?[e,n||0,t||"0"]:a}))})}))}},m=function(){var e=Object(S.a)(x.a.mark((function e(){var t,a,c,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.mainStat){e.next=15;break}return d(!0),performance.mark("chance"),e.next=5,pe.calculateChance({acceptBothSets:n.acceptBothSets,type:n.type,mainStat:n.mainStat,subStats:n.subStats.reduce((function(e,t){var n=Object(C.a)(t,2),a=n[0],c=n[1];return Object(v.a)(Object(v.a)({},e),{},Object(g.a)({},a,c))}),{})});case 5:t=e.sent,a=t.chance,c=t.upgradeChance,r=t.chanceSubsMatch,performance.measure("Time to calculate chances","chance"),d(!1),performance.getEntriesByType("measure").forEach((function(e){console.log(e.name,e.duration,"ms")})),performance.clearMarks(),performance.clearMeasures(),o({chance:a,upgradeChance:c,chanceSubsMatch:r});case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object($.jsxs)(w.a,{flexFlow:"column wrap",width:"100%",alignItems:"center",children:[Object($.jsx)(F.a,{margin:1,maxW:"95%",width:"lg",borderWidth:"1px",borderRadius:"lg",padding:2,children:Object($.jsxs)(E.b,{padding:"2",spacing:"4",children:[Object($.jsxs)(D.a,{display:"flex",alignItems:"center",children:[Object($.jsx)(k.a,{cursor:"pointer",htmlFor:"one-set",size:"lg",mb:1,children:"Accept both artifact sets from a domain"}),Object($.jsx)(M.a,{id:"one-set",onChange:function(e){a((function(t){return Object(v.a)(Object(v.a)({},t),{},{acceptBothSets:!!e.target.checked})}))},isChecked:n.acceptBothSets})]}),Object($.jsxs)(D.a,{id:"type",children:[Object($.jsx)(k.a,{children:"Artifact type:"}),Object($.jsx)(ue,{value:n.type,items:me,onChange:function(e){a((function(t){return{acceptBothSets:t.acceptBothSets,type:e,subStats:[]}}))}})]}),Object($.jsxs)(D.a,{id:"mainStat",children:[Object($.jsx)(k.a,{children:"Main stat:"}),Object($.jsx)(ue,{value:n.mainStat,items:h,onChange:function(e){a((function(t){return Object(v.a)(Object(v.a)({},t),{},{mainStat:e,subStats:[]})}))}})]}),Object($.jsxs)(D.a,{id:"subStat",children:[Object($.jsx)(k.a,{children:"Sub stats (optional):"}),Object($.jsxs)(E.b,{alignItems:"start",width:"100%",children:[n.subStats.map((function(e,t){var n=Object(C.a)(e,3),c=n[0],r=n[2];return Object($.jsxs)(E.a,{width:"100%",children:[Object($.jsx)(D.a,{id:"substat-".concat(t,"-name"),children:Object($.jsx)(ue,{value:c,items:[{label:c,value:c}].concat(Object(y.a)(O)),onChange:f(c)})}),Object($.jsx)(P.a,{fontWeight:"bold",fontSize:"large",children:">="}),Object($.jsx)(D.a,{id:"substat-".concat(t,"-value"),children:Object($.jsx)(T.a,{min:0,defaultValue:0,value:r,onChange:p(c),children:Object($.jsx)(T.b,{})})}),Object($.jsx)(A.a,{colorScheme:"blue",onClick:function(){return function(e){a((function(t){return Object(v.a)(Object(v.a)({},t),{},{subStats:t.subStats.filter((function(t){return t[0]!==e}))})}))}(c)}})]},"substat-".concat(t))})),Object($.jsx)(D.a,{children:K.a.keys(n.subStats).length<4&&Object($.jsx)(H.a,{color:"white",fontSize:"2xl",colorScheme:"purple","aria-label":"Add substat",onClick:function(){O.length&&a((function(e){return Object(v.a)(Object(v.a)({},e),{},{subStats:[].concat(Object(y.a)(e.subStats),[[O[0].value,0,"0"]])})}))},icon:Object($.jsx)(B.a,{})})})]})]}),Object($.jsx)(R.a,{disabled:!n.mainStat,colorScheme:"pink",isLoading:j,onClick:m,children:"Calculate"})]})}),i.chance>0&&Object($.jsx)(re,{chances:i})]})}var ge=p.a.div(be||(be=Object(f.a)(["\n  background-color: #282c34;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: white;\n"])));var Se=function(){return Object($.jsx)(ge,{children:Object($.jsx)(xe,{})})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,442)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};h.a.render(Object($.jsx)(j.a.StrictMode,{children:Object($.jsx)(O.a,{children:Object($.jsx)(Se,{})})}),document.getElementById("root")),ye()}},[[403,1,2]]]);
//# sourceMappingURL=main.af9060ea.chunk.js.map