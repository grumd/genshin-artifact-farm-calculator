(this["webpackJsonpgenshin-artifact-farm-calculator"]=this["webpackJsonpgenshin-artifact-farm-calculator"]||[]).push([[0],{231:function(e,t,a){var n=a(402),c=["calculateChance","Worker"];e.exports=function(){var e=new Worker(a.p+"496ffebe93a5d82d2a84.worker.js",{name:"[hash].worker.js"});return n(e,c),e}},258:function(e,t,a){},403:function(e,t,a){"use strict";a.r(t);var n,c,r,i,o,s,l,u=a(1),b=a.n(u),j=a(98),d=a.n(j),h=a(438),O=(a(258),a(58)),f=a(59),p=a(91),m=a.n(p),x=a(11),g=a(209),S=a(36),v=a(21),y=a(5),C=a(420),w=a(419),E=a(439),F=a(109),D=a(430),k=a(440),M=a(421),P=a(436),A=a(433),H=a(434),T=a(239),B=a(233),R=a(40),G=a.n(R),K=a(422),W=a(423),L=a(424),I=a(241),z=a(428),_=a(229),N=a(230),V=a(112),q=a(213),Y=a(435),J=a(210),Q=a(4),$=f.a.div(n||(n=Object(O.a)(["\n  background: #333b4d;\n  z-index: 2;\n  padding: 0.5em 1em;\n  border-radius: 0.5em;\n  border: 1px solid white;\n  max-width: 95%;\n  font-size: 90%;\n"]))),U=function(e){var t=e.target,a=e.content,n=Object(u.useState)(!1),c=Object(y.a)(n,2),r=c[0],i=c[1],o=Object(u.useState)(null),s=Object(y.a)(o,2),l=s[0],b=s[1],j=Object(u.useState)(null),d=Object(y.a)(j,2),h=d[0],O=d[1],f=Object(u.useState)(null),p=Object(y.a)(f,2),m=p[0],x=p[1],g=Object(Y.a)(l,h,{modifiers:[{name:"arrow",options:{element:m}},{name:"preventOverflow",options:{padding:5}}]}),S=g.styles,C=g.attributes,w=Object(u.useMemo)((function(){return[{current:h},{current:l}]}),[h,l]);Object(J.a)((function(){r&&i(!1)}),{refs:w,ignoreClass:"popup-body",disabled:!r});return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("div",{ref:b,onClick:function(){i((function(e){return!e}))},children:t}),r&&Object(Q.jsxs)($,Object(v.a)(Object(v.a)({className:"popup-body",ref:O,style:S.popper},C.popper),{},{children:[a,Object(Q.jsx)("div",{ref:x,style:S.arrow})]}))]})},X=function(e){if(G.a.isNil(e)||!Number.isFinite(e))return"";if(0===e)return"0%";for(var t=0;t<12&&!(100*e*Math.pow(10,t)>1);)t++;return(100*e).toFixed(t+2).replace(/([1-9])?\.?0+$/,"$1")+"%"},Z=f.a.div(c||(c=Object(O.a)(["\n  border-radius: 5px;\n  background: #313743;\n  padding: 5px 10px;\n  border: 1px solid white;\n"]))),ee=f.a.div(r||(r=Object(O.a)(["\n  cursor: pointer;\n  font-size: 120%;\n"]))),te=Object(u.memo)((function(e){var t=e.chances,a=e.chartData;return Object(Q.jsxs)(w.a,{margin:1,maxW:"95%",width:"lg",borderWidth:"1px",borderRadius:"lg",padding:2,paddingLeft:4,children:[G.a.isNumber(t.chanceSubsMatch)&&Object(Q.jsxs)(C.a,{alignItems:"center",flexFlow:"row nowrap",children:[Object(Q.jsx)(M.a,{children:"Chance of getting an artifact with these stats:"}),Object(Q.jsx)(M.a,{paddingLeft:2,paddingRight:2,fontSize:"120%",fontWeight:"bold",children:X(t.chanceSubsMatch)})]}),G.a.isNumber(t.upgradeChance)&&Object(Q.jsxs)(C.a,{alignItems:"center",flexFlow:"row nowrap",children:[Object(Q.jsx)(M.a,{children:"Chance of upgrading to desired numbers:"}),Object(Q.jsx)(M.a,{paddingLeft:2,paddingRight:2,fontSize:"120%",fontWeight:"bold",children:X(t.upgradeChance)})]}),Object(Q.jsxs)(C.a,{alignItems:"center",flexFlow:"row nowrap",children:[Object(Q.jsx)(M.a,{children:"Total chance in one run (20 resin):"}),Object(Q.jsx)(M.a,{paddingLeft:2,paddingRight:2,fontSize:"120%",fontWeight:"bold",children:X(t.chance)}),Object(Q.jsx)(U,{target:Object(Q.jsx)(ee,{children:Object(Q.jsx)(q.a,{})}),content:Object(Q.jsxs)("div",{children:[Object(Q.jsx)(M.a,{fontWeight:"bold",marginRight:6,children:"This calculation assumes the following:"}),Object(Q.jsx)(M.a,{children:"5* artifacts upgraded to +20;"}),Object(Q.jsx)(M.a,{children:"50% chance to get one of the two sets;"}),Object(Q.jsx)(M.a,{children:"20% chance to get the correct artifact type;"}),Object(Q.jsxs)(M.a,{children:["20% chance to get 4 initial sub-stats, and 80% to get 3."," ",Object(Q.jsx)(K.a,{color:"teal",isExternal:!0,href:"https://genshin-impact.fandom.com/wiki/Loot_System/Artifact_Drop_Distribution#Initial_Sub_Stat_Number_Distribution",children:"Source"})]}),Object(Q.jsxs)(M.a,{children:["Calculated chance to get the correct main stat and sub-stats;"," ",Object(Q.jsx)(K.a,{color:"teal",isExternal:!0,href:"https://genshin-impact.fandom.com/wiki/Artifacts/Distribution",children:"Source 1"}),", ",Object(Q.jsx)(K.a,{color:"teal",isExternal:!0,href:"https://docs.google.com/spreadsheets/d/1sYQrV5Yp_QTVEKMLWquMu0mDgHhOO_Rh2LfcWdS_Eno/edit",children:"Source 2"})]}),Object(Q.jsxs)(M.a,{children:["7% chance of getting two 5* artifacts per run;"," ",Object(Q.jsx)(K.a,{color:"teal",isExternal:!0,href:"https://docs.google.com/spreadsheets/d/1RcuniapqS6nOP05OCH0ui10Vo3bWu0AvFbhgcHzTybY/edit",children:"Source"})]}),Object(Q.jsxs)(M.a,{marginTop:2,children:["Contact me at"," ",Object(Q.jsx)(K.a,{color:"teal",isExternal:!0,href:"https://www.reddit.com/message/compose/?to=grumd",children:"/u/grumd"})," ","if you have any questions."]})]})})]}),Object(Q.jsx)(M.a,{children:"Cumulative chance to get this artifact at least once:"}),t.chance>0&&!G.a.isEmpty(a)&&Object(Q.jsx)(W.a,{width:"100%",aspect:2.5,children:Object(Q.jsxs)(L.a,{data:a,margin:{top:5,right:5,bottom:5,left:-15},children:[Object(Q.jsx)("defs",{children:Object(Q.jsxs)("linearGradient",{id:"colorGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(Q.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),Object(Q.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),Object(Q.jsx)(I.a,{fillOpacity:1,fill:"url(#colorGrad)",type:"monotone",dataKey:"chance",stroke:"#8884d8"}),Object(Q.jsx)(z.a,{stroke:"#ccc",strokeDasharray:"5 5"}),Object(Q.jsx)(_.a,{dataKey:"resin"}),Object(Q.jsx)(N.a,{domain:[0,1],tickFormatter:function(e){return(100*e).toFixed(0)+"%"}}),Object(Q.jsx)(V.a,{isAnimationActive:!1,content:function(e){var t,a=e.payload,n=null===a||void 0===a||null===(t=a[0])||void 0===t?void 0:t.payload;return n?Object(Q.jsxs)(Z,{children:[Object(Q.jsxs)("div",{children:["Resin: ",n.resin]}),Object(Q.jsxs)("div",{children:["Days: ",n.resin/160]}),Object(Q.jsxs)("div",{children:["Chance: ",X(n.chance)]})]}):null}})]})})]})})),ae=a(240),ne=a(429),ce=["onChange","value","items"],re=f.a.option(i||(i=Object(O.a)(["\n  color: black;\n  background: lightgrey;\n"])));function ie(e){var t=e.onChange,a=e.value,n=e.items,c=Object(ae.a)(e,ce),r=Object(u.useCallback)((function(e){var a=e.target.value;t(a)}),[t]);return Object(Q.jsx)(ne.a,Object(v.a)(Object(v.a)({onChange:r,value:a},c),{},{children:n.map((function(e){return Object(Q.jsx)(re,{value:e.value,children:e.label},e.value)}))}))}!function(e){e.Flower="Flower of Life",e.Plume="Plume of Death",e.Sands="Sands of Eon",e.Goblet="Goblet of Eonothem",e.Circlet="Circlet of Logos"}(o||(o={})),function(e){e.HPFlat="HP",e.HP="HP%",e.ATKFlat="ATK",e.ATK="ATK%",e.DEFFlat="DEF",e.DEF="DEF%",e.CR="CRIT Rate%",e.CD="CRIT DMG%",e.ER="Energy Recharge%",e.EM="Elemental Mastery",e.HB="Healing Bonus%",e.Pyro="Pyro DMG Bonus%",e.Electro="Electro DMG Bonus%",e.Cryo="Cryo DMG Bonus%",e.Hydro="Hydro DMG Bonus%",e.Anemo="Anemo DMG Bonus%",e.Geo="Geo DMG Bonus%",e.Physical="Physical DMG Bonus%",e.Dendro="Dendro DMG Bonus%"}(s||(s={}));var oe,se=[s.CR,s.CD,s.ATK,s.ATKFlat,s.HP,s.HPFlat,s.DEF,s.DEFFlat,s.ER,s.EM],le=[s.HPFlat,s.ATKFlat,s.HP,s.ATK,s.DEF,s.ER,s.EM,s.CR,s.CD,s.HB,s.Pyro,s.Electro,s.Cryo,s.Hydro,s.Anemo,s.Geo,s.Physical,s.Dendro],ue=(l={},Object(x.a)(l,o.Flower,[s.HPFlat]),Object(x.a)(l,o.Plume,[s.ATKFlat]),Object(x.a)(l,o.Sands,[s.HP,s.ATK,s.DEF,s.ER,s.EM]),Object(x.a)(l,o.Goblet,[s.HP,s.ATK,s.DEF,s.Pyro,s.Electro,s.Cryo,s.Hydro,s.Anemo,s.Geo,s.Physical,s.Dendro,s.EM]),Object(x.a)(l,o.Circlet,[s.HP,s.ATK,s.DEF,s.CR,s.CD,s.HB,s.EM]),l),be=le.reduce((function(e,t){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},t,G.a.without([t],se)))}),{}),je=a(231),de=a.n(je)()(),he=G.a.values(o).map((function(e){return{label:e,value:e}}));function Oe(){var e=Object(u.useState)({acceptBothSets:!1,type:o.Flower,subStats:[]}),t=Object(y.a)(e,2),a=t[0],n=t[1],c=Object(u.useState)({}),r=Object(y.a)(c,2),i=r[0],s=r[1],l=Object(u.useState)(!1),b=Object(y.a)(l,2),j=b[0],d=b[1],h=Object(u.useState)([]),O=Object(y.a)(h,2),f=O[0],p=O[1],R=ue[a.type].map((function(e){return{label:e,value:e}})),K=(a.mainStat?be[a.mainStat]:[]).filter((function(e){return!a.subStats.find((function(t){return Object(y.a)(t,1)[0]===e}))})).map((function(e){return{label:e,value:e}}));Object(u.useEffect)((function(){a.mainStat||n((function(e){return Object(v.a)(Object(v.a)({},e),{},{mainStat:R[0].value})}))}),[a.mainStat,R]);var W=function(e){return function(t){n((function(a){return Object(v.a)(Object(v.a)({},a),{},{subStats:a.subStats.map((function(a){return a[0]===e?[t,0,"0"]:a}))})}))}},L=function(e){return function(t,a){n((function(n){return Object(v.a)(Object(v.a)({},n),{},{subStats:n.subStats.map((function(n){return n[0]===e?[e,a||0,t||"0"]:n}))})}))}},I=function(){var e=Object(g.a)(m.a.mark((function e(){var t,n,c,r,i,o,l,u,b,j;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.mainStat){e.next=30;break}return d(!0),performance.mark("chance"),e.next=5,de.calculateChance({acceptBothSets:a.acceptBothSets,type:a.type,mainStat:a.mainStat,subStats:a.subStats.reduce((function(e,t){var a=Object(y.a)(t,2),n=a[0],c=a[1];return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},n,c))}),{})});case 5:t=e.sent,n=t.chance,c=t.upgradeChance,r=t.chanceSubsMatch,performance.measure("Time to calculate chances","chance"),d(!1),performance.getEntriesByType("measure").forEach((function(e){console.log(e.name,e.duration,"ms")})),performance.clearMarks(),performance.clearMeasures(),i=1-n,o=[],l=0,u=1,b=n>.01?1:n>.005?4:n>.001?8:16,j=0;case 19:if(!(j<2920)){e.next=28;break}if(!(u<.05)){e.next=22;break}return e.abrupt("break",28);case 22:l+=20,u*=i,(j+1)%b||o.push({resin:l,chance:1-u});case 25:j++,e.next=19;break;case 28:p(o),s({chance:n,upgradeChance:c,chanceSubsMatch:r});case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Q.jsxs)(C.a,{flexFlow:"column wrap",width:"100%",alignItems:"center",children:[Object(Q.jsx)(w.a,{margin:1,maxW:"95%",width:"lg",borderWidth:"1px",borderRadius:"lg",padding:2,children:Object(Q.jsxs)(E.b,{padding:"2",spacing:"4",children:[Object(Q.jsxs)(F.a,{display:"flex",alignItems:"center",children:[Object(Q.jsx)(D.a,{cursor:"pointer",htmlFor:"one-set",size:"lg",mb:1,children:"Accept both artifact sets from a domain"}),Object(Q.jsx)(k.a,{id:"one-set",onChange:function(e){n((function(t){return Object(v.a)(Object(v.a)({},t),{},{acceptBothSets:!!e.target.checked})}))},isChecked:a.acceptBothSets})]}),Object(Q.jsxs)(F.a,{id:"type",children:[Object(Q.jsx)(D.a,{children:"Artifact type:"}),Object(Q.jsx)(ie,{value:a.type,items:he,onChange:function(e){n((function(t){return{acceptBothSets:t.acceptBothSets,type:e,subStats:[]}}))}})]}),Object(Q.jsxs)(F.a,{id:"mainStat",children:[Object(Q.jsx)(D.a,{children:"Main stat:"}),Object(Q.jsx)(ie,{value:a.mainStat,items:R,onChange:function(e){n((function(t){return Object(v.a)(Object(v.a)({},t),{},{mainStat:e,subStats:[]})}))}})]}),Object(Q.jsxs)(F.a,{id:"subStat",children:[Object(Q.jsx)(D.a,{children:"Sub stats (optional):"}),Object(Q.jsxs)(E.b,{alignItems:"start",width:"100%",children:[a.subStats.map((function(e,t){var a=Object(y.a)(e,3),c=a[0],r=a[2];return Object(Q.jsxs)(E.a,{width:"100%",children:[Object(Q.jsx)(F.a,{id:"substat-".concat(t,"-name"),children:Object(Q.jsx)(ie,{value:c,items:[{label:c,value:c}].concat(Object(S.a)(K)),onChange:W(c)})}),Object(Q.jsx)(M.a,{fontWeight:"bold",fontSize:"large",children:">="}),Object(Q.jsx)(F.a,{id:"substat-".concat(t,"-value"),children:Object(Q.jsx)(P.a,{min:0,defaultValue:0,value:r,onChange:L(c),children:Object(Q.jsx)(P.b,{})})}),Object(Q.jsx)(A.a,{colorScheme:"blue",onClick:function(){return function(e){n((function(t){return Object(v.a)(Object(v.a)({},t),{},{subStats:t.subStats.filter((function(t){return t[0]!==e}))})}))}(c)}})]},"substat-".concat(t))})),Object(Q.jsx)(F.a,{children:G.a.keys(a.subStats).length<4&&Object(Q.jsx)(H.a,{color:"white",fontSize:"2xl",colorScheme:"purple","aria-label":"Add substat",onClick:function(){K.length&&n((function(e){return Object(v.a)(Object(v.a)({},e),{},{subStats:[].concat(Object(S.a)(e.subStats),[[K[0].value,0,"0"]])})}))},icon:Object(Q.jsx)(B.a,{})})})]})]}),Object(Q.jsx)(T.a,{disabled:!a.mainStat,colorScheme:"pink",isLoading:j,onClick:I,children:"Calculate"})]})}),!G.a.isNil(i.chance)&&Object(Q.jsx)(te,{chances:i,chartData:f})]})}var fe=f.a.div(oe||(oe=Object(O.a)(["\n  background-color: #282c34;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: white;\n"])));var pe=function(){return Object(Q.jsx)(fe,{children:Object(Q.jsx)(Oe,{})})},me=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,442)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};d.a.render(Object(Q.jsx)(b.a.StrictMode,{children:Object(Q.jsx)(h.a,{children:Object(Q.jsx)(pe,{})})}),document.getElementById("root")),me()}},[[403,1,2]]]);
//# sourceMappingURL=main.166f70ef.chunk.js.map