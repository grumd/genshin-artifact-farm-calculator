(this["webpackJsonpgenshin-artifact-farm-calculator"]=this["webpackJsonpgenshin-artifact-farm-calculator"]||[]).push([[0],{214:function(t,e,a){var n=a(268),c=["calculateChance","Worker"];t.exports=function(){var t=new Worker(a.p+"d6e207601f8d5ef40c93.worker.js",{name:"[hash].worker.js"});return n(t,c),t}},262:function(t,e,a){},407:function(t,e,a){"use strict";a.r(e);var n,c,r,i=a(1),s=a.n(i),o=a(100),l=a.n(o),u=a(443),j=(a(262),a(79)),b=a(80),d=a(93),h=a.n(d),O=a(8),f=a(213),x=a(31),m=a(29),p=a(4),g=a(426),v=a(427),S=a(428),y=a(440),C=a(431),E=a(444),w=a(104),F=a(438),D=a(441),k=a(430),P=a(439),H=a(243),A=a(237),M=a(219),T=a(63),R=a.n(T);!function(t){t.Flower="Flower of Life",t.Plume="Plume of Death",t.Sands="Sands of Eon",t.Goblet="Goblet of Eonothem",t.Circlet="Circlet of Logos"}(n||(n={})),function(t){t.HPFlat="HP",t.HP="HP%",t.ATKFlat="ATK",t.ATK="ATK%",t.DEFFlat="DEF",t.DEF="DEF%",t.CR="CRIT Rate%",t.CD="CRIT DMG%",t.ER="Energy Recharge%",t.EM="Elemental Mastery",t.HB="Healing Bonus%",t.Pyro="Pyro DMG Bonus%",t.Electro="Electro DMG Bonus%",t.Cryo="Cryo DMG Bonus%",t.Hydro="Hydro DMG Bonus%",t.Anemo="Anemo DMG Bonus%",t.Geo="Geo DMG Bonus%",t.Physical="Physical DMG Bonus%"}(c||(c={}));var G,K=[c.CR,c.CD,c.ATK,c.ATKFlat,c.HP,c.HPFlat,c.DEF,c.DEFFlat,c.ER,c.EM],B=[c.HPFlat,c.ATKFlat,c.HP,c.ATK,c.DEF,c.ER,c.EM,c.CR,c.CD,c.HB,c.Pyro,c.Electro,c.Cryo,c.Hydro,c.Anemo,c.Geo,c.Physical],W=(r={},Object(O.a)(r,n.Flower,[c.HPFlat]),Object(O.a)(r,n.Plume,[c.ATKFlat]),Object(O.a)(r,n.Sands,[c.HP,c.ATK,c.DEF,c.ER,c.EM]),Object(O.a)(r,n.Goblet,[c.HP,c.ATK,c.DEF,c.Pyro,c.Electro,c.Cryo,c.Hydro,c.Anemo,c.Geo,c.Physical,c.EM]),Object(O.a)(r,n.Circlet,[c.HP,c.ATK,c.DEF,c.CR,c.CD,c.HB,c.EM]),r),L=B.reduce((function(t,e){return Object(m.a)(Object(m.a)({},t),{},Object(O.a)({},e,R.a.without([e],K)))}),{}),I=a(214),z=a.n(I),N=a(244),V=a(424),Y=a(5),_=["onChange","value","items"],q=b.a.option(G||(G=Object(j.a)(["\n  color: black;\n  background: lightgrey;\n"])));function J(t){var e=t.onChange,a=t.value,n=t.items,c=Object(N.a)(t,_),r=Object(i.useCallback)((function(t){var a=t.target.value;e(a)}),[e]);return Object(Y.jsx)(V.a,Object(m.a)(Object(m.a)({onChange:r,value:a},c),{},{children:n.map((function(t){return Object(Y.jsx)(q,{value:t.value,children:t.label},t.value)}))}))}var Q,U,X,Z=function(t){if(R.a.isNil(t))return"";if(0===t)return"0%";for(var e=0;e<12&&!(100*t*Math.pow(10,e)>1);)e++;return(100*t).toFixed(e+2)+"%"},$=a(432),tt=a(433),et=a(245),at=a(437),nt=a(235),ct=a(236),rt=a(114),it=z()(),st=R.a.values(n).map((function(t){return{label:t,value:t}})),ot=b.a.div(Q||(Q=Object(j.a)(["\n  border-radius: 5px;\n  background: #313743;\n  padding: 5px 10px;\n  border: 1px solid white;\n"]))),lt=b.a.div(U||(U=Object(j.a)(["\n  cursor: pointer;\n"]))),ut=Object(i.memo)((function(t){var e=t.chance,a=t.chartData;return Object(Y.jsxs)(g.a,{margin:1,maxW:"95%",width:"lg",borderWidth:"1px",borderRadius:"lg",padding:2,paddingLeft:4,children:[Object(Y.jsxs)(v.a,{alignItems:"baseline",flexFlow:"row nowrap",children:[Object(Y.jsx)(S.a,{children:"Chance in one run (20 resin):"}),Object(Y.jsx)(S.a,{paddingLeft:2,paddingRight:2,fontSize:"large",fontWeight:"bold",children:Z(e)}),Object(Y.jsxs)(y.a,{children:[Object(Y.jsx)(y.f,{children:Object(Y.jsx)(lt,{children:Object(Y.jsx)(M.a,{})})}),Object(Y.jsxs)(y.e,{color:"black",width:"70%",children:[Object(Y.jsx)(y.b,{}),Object(Y.jsx)(y.d,{}),Object(Y.jsxs)(y.c,{children:[Object(Y.jsx)(S.a,{fontWeight:"bold",marginRight:6,children:"This calculation assumes the following:"}),Object(Y.jsx)(S.a,{children:"5* artifacts upgraded to +20;"}),Object(Y.jsxs)(S.a,{children:["1.07 artifacts per run on average;"," ",Object(Y.jsx)(C.a,{color:"teal",isExternal:!0,href:"https://docs.google.com/spreadsheets/d/1RcuniapqS6nOP05OCH0ui10Vo3bWu0AvFbhgcHzTybY/edit",children:"Source"})]}),Object(Y.jsx)(S.a,{children:"50% chance to get one of the two sets;"}),Object(Y.jsx)(S.a,{children:"20% chance to get the correct artifact type;"}),Object(Y.jsxs)(S.a,{children:["Chance to get the correct main stat and sub-stats;"," ",Object(Y.jsx)(C.a,{color:"teal",isExternal:!0,href:"https://genshin-impact.fandom.com/wiki/Artifacts/Distribution",children:"Source 1"}),", ",Object(Y.jsx)(C.a,{color:"teal",isExternal:!0,href:"https://docs.google.com/spreadsheets/d/1sYQrV5Yp_QTVEKMLWquMu0mDgHhOO_Rh2LfcWdS_Eno/edit",children:"Source 2"})]}),Object(Y.jsx)(S.a,{marginTop:2,children:"Note: chance to get 4 initial sub-stats is assumed to be 25%."}),Object(Y.jsxs)(S.a,{children:["Contact me at"," ",Object(Y.jsx)(C.a,{color:"teal",isExternal:!0,href:"https://www.reddit.com/message/compose/?to=grumd",children:"/u/grumd"})," ","if you have more accurate information."]})]})]})]})]}),Object(Y.jsx)(S.a,{children:"Cumulative chance to get this artifact at least once:"}),e>0&&!R.a.isEmpty(a)&&Object(Y.jsx)($.a,{width:"100%",aspect:2.5,children:Object(Y.jsxs)(tt.a,{data:a,margin:{top:5,right:5,bottom:5,left:0},children:[Object(Y.jsx)("defs",{children:Object(Y.jsxs)("linearGradient",{id:"colorGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(Y.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),Object(Y.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),Object(Y.jsx)(et.a,{fillOpacity:1,fill:"url(#colorGrad)",type:"monotone",dataKey:"chance",stroke:"#8884d8"}),Object(Y.jsx)(at.a,{stroke:"#ccc",strokeDasharray:"5 5"}),Object(Y.jsx)(nt.a,{dataKey:"resin"}),Object(Y.jsx)(ct.a,{domain:[0,1],tickFormatter:function(t){return(100*t).toFixed(0)+"%"}}),Object(Y.jsx)(rt.a,{isAnimationActive:!1,content:function(t){var e,a=t.payload,n=null===a||void 0===a||null===(e=a[0])||void 0===e?void 0:e.payload;return n?Object(Y.jsxs)(ot,{children:[Object(Y.jsxs)("div",{children:["Resin: ",n.resin]}),Object(Y.jsxs)("div",{children:["Days: ",n.resin/160]}),Object(Y.jsxs)("div",{children:["Chance: ",Z(n.chance)]})]}):null}})]})})]})}));function jt(){var t=Object(i.useState)({type:n.Flower,subStats:[]}),e=Object(p.a)(t,2),a=e[0],c=e[1],r=Object(i.useState)(null),s=Object(p.a)(r,2),o=s[0],l=s[1],u=Object(i.useState)(!1),j=Object(p.a)(u,2),b=j[0],d=j[1],y=Object(i.useState)([]),C=Object(p.a)(y,2),M=C[0],T=C[1],G=W[a.type].map((function(t){return{label:t,value:t}})),K=(a.mainStat?L[a.mainStat]:[]).filter((function(t){return!a.subStats.find((function(e){return Object(p.a)(e,1)[0]===t}))})).map((function(t){return{label:t,value:t}}));Object(i.useEffect)((function(){a.mainStat||c((function(t){return Object(m.a)(Object(m.a)({},t),{},{mainStat:G[0].value})}))}),[a.mainStat,G]);var B=function(t){return function(e){c((function(a){return Object(m.a)(Object(m.a)({},a),{},{subStats:a.subStats.map((function(a){return a[0]===t?[e,0]:a}))})}))}},I=function(t){return function(e,a){c((function(e){return Object(m.a)(Object(m.a)({},e),{},{subStats:e.subStats.map((function(e){return e[0]===t?[t,a]:e}))})}))}},z=function(){var t=Object(f.a)(h.a.mark((function t(){var e,n,c,r,i,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.mainStat){t.next=21;break}return d(!0),t.next=4,it.calculateChance({type:a.type,mainStat:a.mainStat,subStats:a.subStats.reduce((function(t,e){var a=Object(p.a)(e,2),n=a[0],c=a[1];return Object(m.a)(Object(m.a)({},t),{},Object(O.a)({},n,c))}),{})});case 4:e=t.sent,d(!1),n=1-e,c=[],r=0,i=1,s=0;case 10:if(!(s<2920)){t.next=19;break}if(!(i<.05)){t.next=13;break}return t.abrupt("break",19);case 13:r+=20,i*=n,c.push({resin:r,chance:1-i});case 16:s++,t.next=10;break;case 19:T(c),l(e);case 21:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(Y.jsxs)(v.a,{flexFlow:"column wrap",width:"100%",alignItems:"center",children:[Object(Y.jsx)(g.a,{margin:1,maxW:"95%",width:"lg",borderWidth:"1px",borderRadius:"lg",padding:2,children:Object(Y.jsxs)(E.b,{padding:"2",spacing:"4",children:[Object(Y.jsxs)(w.a,{id:"type",children:[Object(Y.jsx)(F.a,{children:"Artifact type:"}),Object(Y.jsx)(J,{value:a.type,items:st,onChange:function(t){c({type:t,subStats:[]})}})]}),Object(Y.jsxs)(w.a,{id:"mainStat",children:[Object(Y.jsx)(F.a,{children:"Main stat:"}),Object(Y.jsx)(J,{value:a.mainStat,items:G,onChange:function(t){c((function(e){return Object(m.a)(Object(m.a)({},e),{},{mainStat:t,subStats:[]})}))}})]}),Object(Y.jsxs)(w.a,{id:"subStat",children:[Object(Y.jsx)(F.a,{children:"Sub stats (optional):"}),Object(Y.jsxs)(E.b,{alignItems:"start",width:"100%",children:[a.subStats.map((function(t,e){var a=Object(p.a)(t,2),n=a[0],r=a[1];return Object(Y.jsxs)(E.a,{width:"100%",children:[Object(Y.jsx)(w.a,{id:"substat-".concat(e,"-name"),children:Object(Y.jsx)(J,{value:n,items:[{label:n,value:n}].concat(Object(x.a)(K)),onChange:B(n)})}),Object(Y.jsx)(S.a,{fontWeight:"bold",fontSize:"large",children:">="}),Object(Y.jsx)(w.a,{id:"substat-".concat(e,"-value"),children:Object(Y.jsx)(D.a,{value:r,onChange:I(n),children:Object(Y.jsx)(D.b,{})})}),Object(Y.jsx)(k.a,{colorScheme:"blue",onClick:function(){return function(t){c((function(e){return Object(m.a)(Object(m.a)({},e),{},{subStats:e.subStats.filter((function(e){return e[0]!==t}))})}))}(n)}})]},"substat-".concat(e))})),Object(Y.jsx)(w.a,{children:R.a.keys(a.subStats).length<4&&Object(Y.jsx)(P.a,{color:"white",fontSize:"2xl",colorScheme:"purple","aria-label":"Add substat",onClick:function(){K.length&&c((function(t){return Object(m.a)(Object(m.a)({},t),{},{subStats:[].concat(Object(x.a)(t.subStats),[[K[0].value,0]])})}))},icon:Object(Y.jsx)(A.a,{})})})]})]}),Object(Y.jsx)(H.a,{disabled:!a.mainStat,colorScheme:"pink",isLoading:b,onClick:z,children:"Calculate (may take several seconds)"})]})}),!R.a.isNil(o)&&Object(Y.jsx)(ut,{chance:o,chartData:M})]})}var bt=b.a.div(X||(X=Object(j.a)(["\n  background-color: #282c34;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: white;\n"])));var dt=function(){return Object(Y.jsx)(bt,{children:Object(Y.jsx)(jt,{})})},ht=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,445)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),n(t),c(t),r(t),i(t)}))};l.a.render(Object(Y.jsx)(s.a.StrictMode,{children:Object(Y.jsx)(u.a,{children:Object(Y.jsx)(dt,{})})}),document.getElementById("root")),ht()}},[[407,1,2]]]);
//# sourceMappingURL=main.2403be78.chunk.js.map